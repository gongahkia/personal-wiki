<h1><code>MongoDB</code></h1>
<p><a href="https://www.mongodb.com/resources/basics/databases/nosql-explained">NoSQL document database</a> that excels at high volume data storage.</p>
<h2>Quickstart</h2>
<ul>
<li>MongoDB stores data in documents and collections with a JSON-like syntax <em>(key-value pairs)</em> similar to Python dictionaries and Javascript objects</li>
<li>Mongo Query Language (MQL) uses JSON to query data</li>
<li>Documents are equivalent to rows (records) in MySQL</li>
<li>Collections hold one or more Binary JSON (BSON) documents, equivalent to tables in MySQL</li>
</ul>
<pre><code class="language-sh"><span class="hljs-comment"># ---------- QUICKSTART -----------</span>

<span class="hljs-comment"># ------- COMMANDS -------</span>
    <span class="hljs-comment"># mongod =&gt; starts up the mongo database server shell</span>
        <span class="hljs-comment"># &quot;&lt;server_address&gt;&quot; --username &lt;username&gt; =&gt; receives an optional argument in the format of &quot;mongodb+srv://host.ip.address/admin&quot; --username your-username that allows connection to a remote server</span>
    <span class="hljs-comment"># exit =&gt; quits the mongo database server shell</span>

mongod 
<span class="hljs-built_in">exit</span>

<span class="hljs-comment"># ----- GENERAL -----</span>
    <span class="hljs-comment"># show dbs =&gt; lists available databases</span>
    <span class="hljs-comment"># show collections =&gt; lists available collections under a database</span>
    <span class="hljs-comment"># db.createCollection() =&gt; creates a new collection under the specified name</span>
    <span class="hljs-comment"># use &lt;database_name&gt; =&gt; selects a given database as the current one in use</span>
    <span class="hljs-comment"># db.dropDatabase() =&gt; drops all documents from every collection within the current database</span>

<span class="hljs-comment"># --- NOTE!!! ---</span>
    <span class="hljs-comment"># inserting a document implictly creates a new collection</span>
    <span class="hljs-comment"># inserting data into a collection implicitly creates a new database</span>
    <span class="hljs-comment"># the update method always calls the $set operator</span>

show dbs

use employees

db.createCollection(<span class="hljs-string">&#x27;engineers&#x27;</span>)
db.createCollection(<span class="hljs-string">&#x27;doctors&#x27;</span>)

show collections

db.dropDatabase()

<span class="hljs-comment"># ----- CRUD OPERATIONS -----</span>

<span class="hljs-comment"># --- CREATE (INSERT) ---</span>
    <span class="hljs-comment"># every insertion call returns a boolean true or false</span>
    <span class="hljs-comment"># every document (row/record) has a unique _id meta tag automatically assigned to it as its unique identification</span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.insertOne() =&gt; receives a JSON-style object within curly braces {} as an argument, inserts the object to the collection</span>
        <span class="hljs-comment"># empty objects can be inserted into the collection without issue</span>
        <span class="hljs-comment"># object fields are also optional and do not necesarilly have to match the intially declared fields</span>
        <span class="hljs-comment"># object field types can vary and are preserved upon insertion</span>
        <span class="hljs-comment"># object fields can be deeply nested within layers of a document </span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.insert() =&gt; receives an array of JSON-style objects with each object declared within curly braces {} as an argument, inserts all the objects to the collection</span>
    <span class="hljs-comment"># _id =&gt; meta id tag (equivalent of a UID in MySQL) can be manually overriden as an object field</span>
        <span class="hljs-comment"># note that _id meta id tag must ALWAYS be unqiue similar to other databases, and duplicate _id meta tags will result in failed insertion and a WriteError</span>

db.engineers.insertOne({ name: <span class="hljs-string">&quot;Jane Doe&quot;</span>, age: 21, gender: <span class="hljs-string">&#x27;Female&#x27;</span> })
db.engineers.insert([
  { name: <span class="hljs-string">&quot;Foo Bar&quot;</span>, age: 25, gender: <span class="hljs-string">&#x27;Male&#x27;</span> },
  { name: <span class="hljs-string">&quot;Baz Qux&quot;</span>, age: 27, gender: <span class="hljs-string">&#x27;Other&#x27;</span> },
])

db.engineers.insertOne({}) <span class="hljs-comment"># empty object</span>
db.engineers.insertOne({ name: <span class="hljs-string">&quot;Your Name&quot;</span>, gender: <span class="hljs-string">&quot;Male&quot;</span> }) <span class="hljs-comment"># fields missing</span>
db.engineers.insert({ name: [<span class="hljs-string">&#x27;Foo&#x27;</span>, <span class="hljs-string">&#x27;Bar&#x27;</span>], age: 3.14, gender: <span class="hljs-literal">true</span> }) <span class="hljs-comment"># fields have wrong type</span>
db.engineers.insertOne({ <span class="hljs-comment"># nested declaration of an object document</span>
  name: <span class="hljs-string">&quot;Your Name&quot;</span>,
  gender: <span class="hljs-string">&quot;Female&quot;</span>,
  skilledIn: [
    <span class="hljs-string">&quot;MongoDB&quot;</span>,
    <span class="hljs-string">&quot;NoSQL&quot;</span>,
  ],
  <span class="hljs-string">&quot;date-of-birth&quot;</span>: {
    <span class="hljs-string">&quot;date&quot;</span>: 1993-07-20T09:44:18.674Z,
    <span class="hljs-string">&quot;age&quot;</span>: 26
  },
})

db.engineers.insertOne({
  _id: 1, <span class="hljs-comment"># overidding the ID tag within the object document insertion declaration</span>
  name: <span class="hljs-string">&quot;An Engineer&quot;</span>,
  age: 25,
  gender: <span class="hljs-string">&quot;Female&quot;</span>,
})

db.engineers.insertOne({
  _id: 1, <span class="hljs-comment"># results in a WriteError due to duplicate _id meta ID tags being inserted</span>
  name: <span class="hljs-string">&quot;Another Engineer&quot;</span>,
  age: 25,
  gender: <span class="hljs-string">&quot;Male&quot;</span>,
})

<span class="hljs-comment"># --- READ (FIND) ---</span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.findOne(&lt;query_object&gt;) =&gt; searches for documents similar to the specified query object and returns the FIRST document matching the given query</span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.find(&lt;query_object&gt;) =&gt; searches for all documents similar to the specified query object and returns ALL documents matching the given query as a CURSOR (can be converted to an array)</span>
        <span class="hljs-comment"># display of documents is limited to 20 at a time</span>
        <span class="hljs-comment"># empty objects {} are accepted as an argument, and will return every document in the current collection</span>
        <span class="hljs-comment"># datatypes of fields specified within the query object matter, and must be accurate for a successful query</span>
        <span class="hljs-comment"># supports nested query objects and fields</span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.find(&lt;query_object&gt;).pretty() =&gt; queries the database for the specified query object and formats the returned document records before printing them to the stdout</span>

db.engineers.findOne({ name: <span class="hljs-string">&#x27;Foo Bar&#x27;</span> })
db.engineers.find({})
db.engineers.find({}).pretty()
db.engineers.find({ age: 25 })

db.engineers.find({
  name: <span class="hljs-string">&quot;Your Name&quot;</span>,
  gender: <span class="hljs-string">&quot;Female&quot;</span>,
  skilledIn: [
    <span class="hljs-string">&quot;MongoDB&quot;</span>,
    <span class="hljs-string">&quot;NoSQL&quot;</span>,
  ],
  <span class="hljs-string">&quot;date-of-birth&quot;</span>: {
    <span class="hljs-string">&quot;date&quot;</span>: 1993-07-20T09:44:18.674Z,
    <span class="hljs-string">&quot;age&quot;</span>: 26
  },
})

<span class="hljs-comment"># --- UPDATE ---</span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.updateOne(&lt;query_object&gt;, &lt;updated_value&gt;) =&gt; queries the database per the specified query object and updates the FIRST instance of a matched document record</span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.update(&lt;query_object&gt;, &lt;updated_value&gt;) =&gt; queries the database per the specified query object and updates ALL instances of matched document records </span>
    <span class="hljs-comment"># {upsert:true} =&gt; added as an optional argument to the update query to insert the specified update document value if the queried document does not already exist and no matches have been found, and to simply update the matched document if any are found</span>
        <span class="hljs-comment"># returns matched, upserted, modified_count as values</span>

db.engineers.updateOne({ name: <span class="hljs-string">&#x27;Foo Bar&#x27;</span> }, { <span class="hljs-variable">$set</span>: { name: <span class="hljs-string">&#x27;John Doe&#x27;</span>, age: 100 }})
db.engineers.update({ age: 25 }, { <span class="hljs-variable">$set</span>: { age: 26 }})

db.engineers.update({ name: <span class="hljs-string">&#x27;Foo Baz&#x27;</span> },
  { <span class="hljs-variable">$set</span>:
    {
      age: 26,
      gender: <span class="hljs-string">&#x27;Other&#x27;</span>
    }
  },
  { upsert: <span class="hljs-literal">true</span> }
)

<span class="hljs-comment"># --- DELETE ---</span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.deleteOne(&lt;query_object&gt;) =&gt; queries the database per the specified query object and deletes the FIRST instance of a document matching the query</span>
        <span class="hljs-comment"># returns deleted_count</span>
    <span class="hljs-comment"># db.&lt;collection_name&gt;.deleteMany(&lt;query_object&gt;) =&gt; queries the database per the specified query object and deletes ALL instances of documents matching the query</span>
        <span class="hljs-comment"># returns deleted_count</span>

db.engineers.deleteOne({ name: <span class="hljs-string">&#x27;Foo Baz&#x27;</span> })
db.engineers.deleteMany({ gender: <span class="hljs-string">&#x27;Male&#x27;</span> })

<span class="hljs-comment"># ----- OPERATORS -----</span>
    <span class="hljs-comment"># all operators are prefixed by the $ dollarsign character</span>

<span class="hljs-comment"># --- COMPARISON OPERATORS ---</span>
    <span class="hljs-comment"># $gt =&gt; finds all values greater than the specified value</span>
    <span class="hljs-comment"># $gte =&gt; finds all values greater than or equal to the specified value</span>
    <span class="hljs-comment"># $lt =&gt; finds all values less than the specified value</span>
    <span class="hljs-comment"># $lte =&gt; finds all values less than or equal to the specified value</span>
    <span class="hljs-comment"># $eq =&gt; finds all values equal to the specified value</span>
        <span class="hljs-comment"># the $eq operator is added implicitly to most queries (for obvious reasons)</span>
    <span class="hljs-comment"># $ne =&gt; finds all values not equal to the specified value</span>
    <span class="hljs-comment"># $in =&gt; finds any values that match a given element of a specified array, checking for membership within a specified array</span>
    <span class="hljs-comment"># $nin =&gt; finds any values that do not match a given element of a specified array, checking for absence from a specified array</span>

db.engineers.find({ age: { <span class="hljs-variable">$gt</span>: 25 }})
db.engineers.find({ age: { <span class="hljs-variable">$gte</span>: 25 }})
db.engineers.find({ age: { <span class="hljs-variable">$lt</span>: 25 }})
db.engineers.find({ age: { <span class="hljs-variable">$lte</span>: 25 }})
db.engineers.find({ age: { <span class="hljs-variable">$eq</span>: 25 }})
db.engineers.find({ age: { <span class="hljs-variable">$ne</span>: 25 }})
db.engineers.find({ age: { <span class="hljs-variable">$in</span>: [ 20, 23, 24, 25 ]}})
db.engineers.find({ age: { <span class="hljs-variable">$nin</span>: [ 20, 23, 24, 25 ]}})

<span class="hljs-comment"># --- LOGICAL OPERATORS ---</span>
    <span class="hljs-comment"># $and =&gt; joins two query clauses together</span>
        <span class="hljs-comment"># the $and operator is implicitly tagged to most queries (for obvious reasons)</span>
    <span class="hljs-comment"># $or =&gt; either one of two query conditions has to be matched</span>
    <span class="hljs-comment"># $not =&gt; negates the attached query condition</span>
    <span class="hljs-comment"># $nor =&gt; must avoid matching any of the specified query conditions</span>

db.engineers.find({ <span class="hljs-variable">$and</span>: [
  gender: <span class="hljs-string">&#x27;Female&#x27;</span>,
  age: {
    <span class="hljs-variable">$gte</span>: 18
  }
]})

db.engineers.find({ <span class="hljs-variable">$or</span>: [
  gender: <span class="hljs-string">&#x27;Female&#x27;</span>,
  age: {
    <span class="hljs-variable">$gte</span>: 18
  }
]})

db.engineers.find({ <span class="hljs-variable">$not</span>: {
  gender: <span class="hljs-string">&#x27;Female&#x27;</span>
}})

db.engineers.find({ <span class="hljs-variable">$nor</span> [
  gender: <span class="hljs-string">&#x27;Female&#x27;</span>,
  age: {
    <span class="hljs-variable">$gte</span>: 18
  }
]})
</code></pre>
<h2>More on</h2>
<ul>
<li><a href="https://www.mongodb.com/docs/manual/installation/">install MongoDB</a></li>
<li><a href="https://www.mongodb.com/docs/manual/reference/bson-types/">BSON supported datatypes</a></li>
<li><a href="https://www.mongodb.com/docs/manual/reference/operator/">operators in MongoDB</a></li>
<li><a href="https://learnxinyminutes.com/docs/mongodb/">learn MongoDB in y minutes</a></li>
<li><a href="https://university.mongodb.com/">MongoDB univeristy</a></li>
<li><a href="https://youtu.be/-56x56UppqQ?si=b0hxc7LeN9YtXJWk">MongoDB crash course</a></li>
</ul>
