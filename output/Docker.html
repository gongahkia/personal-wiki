<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Docker</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="docker"><code>Docker</code></h1>
<p>The lightweight VM of the future.</p>
<h2 id="quickstart">Quickstart</h2>
<p>Docker allows for packaging and replication of a programâ€™s required environment on any machine, enabling rapid build, test and ship times.</p>
<ul>
<li><strong>docker image</strong>: package that includes code, system tools, libraries, runtime</li>
<li><strong>docker container</strong>: executable instance of a docker image, encapsulating the runtime environment, application code and dependencies</li>
</ul>
<h2 id="docker-cli">Docker CLI</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co"># ---------- DOCKER CLI -----------</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="co"># GENERAL</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>    <span class="co"># docker help =&gt; shows a helplist of all useful docker commands</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a><span class="co"># IMAGES</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>    <span class="co"># docker build {PATH TO DOCKERFILE} =&gt; builds a Docker image from the specified Dockerfile, where the path can be a local file extension or a URL, images are rebuilt whenever a change is made in the Dockerfile</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>    <span class="co"># docker pull {IMAGE NAME} =&gt; similar to git pull, downloads the specified image from Docker Hub</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>    <span class="co"># docker create {IMAGE NAME} =&gt; creates a new container with the specified image but does not run the container automatically like docker run, docker start must be used to then run this container</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>    <span class="co"># docker images =&gt; displays all docker images and their metadata</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>    <span class="co"># docker rmi =&gt; removes one or more docker images if they do not have a container instance currently running</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a><span class="co"># CONTAINERS</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>    <span class="co"># docker run {CONTAINER NAME} =&gt; runs the specified docker container and can be augmented with flags, docker will pull the required image from Docker Hub and build the container if the container is not found, then run it</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>        <span class="co"># -d =&gt; detach flag runs a container in the background and returns to the main terminal</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a>        <span class="co"># -p {INNER PORT NUMBER:OUTER PORT NUMBER} =&gt; publish flag exposes the specified inner port to the specified port outside the container since the app&#39;s runtime is isolated within a given docker container</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a>        <span class="co"># -i =&gt; input flag runs the docker container in an interactive mode, which accepts inputs and responds dynamically to said inputs while running the app, by default docker is in non-interactive mode and does not accept user input</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a>        <span class="co"># -t =&gt; terminal flag often used in conjunction with the -i input flag (-it), creates a pseudo-terminal that the shell can latch onto</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a>    <span class="co"># docker ps =&gt; only shows running containers </span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a>        <span class="co"># -a =&gt; all flag specifies to show all containers</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a>    <span class="co"># docker start {CONTAINER NAME} =&gt; starts the specified container</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a>    <span class="co"># docker stop {CONTAINER NAME} =&gt; stops the specified container</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a>    <span class="co"># docker rm {CONTAINER ID} =&gt; removes a docker container based on the specified container ID</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a>    <span class="co"># docker exec {CONTAINER ID} {COMMAND} =&gt; runs a command in the specified container based on container ID</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a>    <span class="co"># docker logs {CONTAINER ID} =&gt; displays console information logged by the specified container based on container ID</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a>$ <span class="ex">docker</span> run parklane-cai-fan # assuming the container is not found on my machine, docker pulls the parklane-cai-fan image from Docker Hub, builds the container, and runs it</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a>$ <span class="ex">docker</span> run -d parklane-cai-fan # detaches the container from the terminal</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a>$ <span class="ex">docker</span> run 10f10 -p 3000:8000 # exposes port 8000 within the parklane-cai-fan container (of container ID 10f10) <span class="ex">to</span> the exterior port 3000 outside the container</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a>$ <span class="ex">docker</span> stop parklane-cai-fan # stops the docker container parklane-cai-fan from running</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a>$ <span class="ex">docker</span> start parklane-cai-fan # starts the docker container parklane-cai-fan and runs it</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a>$ <span class="ex">docker</span> ps -a # displays all containers, including those not currently running</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a>$ <span class="ex">docker</span> create isle-eating-house # creates a new container from the image isle-eating-house, but does not run it</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a>$ <span class="ex">docker</span> rm 82f82 # removes the container isle-eating-house based on its container ID 82f82</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a>$ <span class="ex">docker</span> images # displays all existing docker images on your machine</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true"></a>$ <span class="ex">docker</span> rmi # removes all docker images that do not currently have a docker container running</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true"></a>$ <span class="ex">docker</span> pull a1-dumplings # pulls the a1-dumplings image from Docker Hub and downloads it to our machine</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true"></a>$ <span class="ex">docker</span> exec 77b77 ls # runs the command <span class="st">&#39;ls&#39;</span> in the a1-dumplings container (of container ID 77b77) </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true"></a>$ <span class="ex">docker</span> logs 77b77 # displays the console output displayed to the stdout from the executed <span class="st">&#39;ls&#39;</span> command issued to the a1-dumplings container</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true"></a>$ <span class="ex">docker</span> build Desktop/coding/proj/Dockerfile # builds an image from the Dockerfile at the specified local file extension</span></code></pre></div>
<h2 id="dockerfile">Dockerfile</h2>
<ul>
<li>file name must be <code>Dockerfile</code> with no extension (similar to a Makefile)</li>
<li>blueprint of a Docker image</li>
<li>enables further configuration of existing Docker base images</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co"># ---------- DOCKERFILE ----------</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>    <span class="co"># FROM {BASE IMAGE NAME} =&gt; specifies the base image the Dockerfile should be created from </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>    <span class="co"># ENV {ENVIRONMENT VARIABLES} =&gt; specifies further environment variables as required</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>    <span class="co"># RUN {LINUX COMMANDS} =&gt; runs any linux commands within the creation of the Docker image</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>    <span class="co"># COPY {SOURCE LOCATION} {TARGET LOCATION} =&gt; copies files from the source location (usually the host machine) to the target location (usually within the Docker container)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    <span class="co"># ENTRYPOINT [{SCRIPT NAME}] =&gt; executes an entire specified script as an entrypoint for the setup of the Docker image</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>    <span class="co"># CMD [{LIST OF ARGUMENTS}] =&gt; always a part of every Dockerfile, this is a list of default commands to run whenever the Docker image has been created and the Docker container is running</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a><span class="kw">FROM</span> parklane-cai-fan <span class="co"># defines the base Docker image</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a><span class="kw">ENV</span> USERNAME=<span class="st">&#39;admin&#39;</span>\</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>    PWD=<span class="st">&#39;watermelon&#39;</span> <span class="co"># defines some environment variables</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a><span class="kw">RUN</span> sudo apt-get upgrade &amp;&amp; sudo apt-get update &amp;&amp; sudo apt-get autoremove &amp;&amp; mkdir ~/.customConfig <span class="co"># runs the specified linux commands</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a><span class="kw">COPY</span> ~/.vimrc ~/.customConfig <span class="co"># copies the specified file .vimrc from local machine to within the Docker container</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;watermelon.sh&quot;</span>] <span class="co"># executes the watermelon.sh script as an entrypoint</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true"></a><span class="kw">CMD</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;uncleTopia.py&quot;</span>] <span class="co"># defines the default commands to run when the Docker container starts up</span></span></code></pre></div>
<h2 id="more-on">More on</h2>
<ul>
<li><a href="https://learnxinyminutes.com/docs/docker/">pushing docker images to Docker Hub</a></li>
<li><a href="https://docs.docker.com/get-docker/">install docker</a></li>
<li><a href="https://hub.docker.com/">docker hub</a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/">dockerfile documentation</a></li>
</ul>
</body>
</html>
