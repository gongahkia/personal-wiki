<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="Wiki Note: Lua - Gabriel Ong">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Gabriel Ong">
  <meta name="robots" content="index, follow">
  
  <meta property="og:title" content="Lua | Gabriel Ong Wiki">
  <meta property="og:description" content="Wiki Note: Lua - Gabriel Ong">
  <meta property="og:type" content="article">
  
  <meta property="og:image" content="https://gabrielongzm.com/asset/portrait/gong-2.png">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Lua | Gabriel Ong Wiki">
  <meta name="twitter:description" content="Wiki Note: Lua - Gabriel Ong">
  
  <link rel="stylesheet" href="../../style.css">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntl-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntlMono-Regular-WebXL.woff2" as="font" crossorigin="anonymous">

  <style>.thin-space:after{content:"\2006"}</style>
  
  <style>pre { overflow-x: auto; max-width: 100%; }</style>

  <script src="../script.js" defer></script>
  <title>Lua | Gabriel Ong Wiki</title>
  <link rel="shortcut icon" href="../asset/blob.ico" type="image/x-icon">
</head>
<body>
  <div id="click-container"></div>
  <input type="button" id="dark-mode">
  <label for="dark-mode">
    <img id="infinityButton" src="../asset/roller.png" height="24" width="24"/>
  </label>
  <main>
    <article class="overallArticleTags">
      
      <section class="note-header">
        <h2>Lua</h2>
        <dl>
          <dt>File size</dt>
          <dd>40.8KB</dd>
          <dt>Lines of code</dt>
          <dd>402</dd>
        </dl>
      </section>
      <section class="note-content">
        <h1><code>Lua</code></h1>
<h2>Comments</h2>
<div class="codehilite"><pre><span></span><code><span class="c1">-- single-line comment</span>

<span class="c1">--&lt;span class=&quot;broken-wikilink&quot;&gt;this is </span>
<span class="nv">a</span><span class="w"> </span>
<span class="nv">multi</span><span class="o">-</span><span class="nv">line</span>
<span class="nv">comment</span><span class="o">&lt;/</span><span class="nv">span</span><span class="o">&gt;--</span>
</code></pre></div>

<h2>Printing</h2>
<div class="codehilite"><pre><span></span><code><span class="c1">-- ---------- PRINTING ----------</span>
<span class="w">    </span><span class="c1">-- print() appends a newline to the output by default</span>
<span class="w">    </span><span class="c1">-- io.write() does not append a newline to the output</span>
<span class="w">    </span><span class="c1">-- io.read() takes in user input from the stdin</span>
<span class="w">    </span><span class="c1">-- .. for string concatenation</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;this is just like python, it comes with a newline&quot;</span><span class="p">)</span>
<span class="nb">io.write</span><span class="p">(</span><span class="s2">&quot;this also works, defaults to the standard out</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nv">watermelon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">io.read</span><span class="p">(</span><span class="s2">&quot;Waiting for your input lah: &quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- assigns user input to the string variable watermelon</span>

<span class="nv">stringOne</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello &quot;</span>
<span class="nv">stringTwo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;World!&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="nv">stringOne</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stringTwo</span><span class="p">)</span><span class="w"> </span><span class="c1">-- this prints &quot;Hello World!&quot; to the console</span>
</code></pre></div>

<h2>Types</h2>
<div class="codehilite"><pre><span></span><code><span class="c1">-- ---------- VARIABLE ----------</span>
<span class="w">    </span><span class="c1">-- variables are global by default</span>
<span class="w">    </span><span class="c1">-- local makes them local</span>

<span class="nv">iAmGlobal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Gojo Satoru&quot;</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">iAmLocal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Geto Suguru&quot;</span>

<span class="c1">-- ---------- TYPE ----------</span>
<span class="w">    </span><span class="c1">-- number (integers, floats, doubles)</span>
<span class="w">    </span><span class="c1">-- string (single, double-quoted, [[]] square brackets; strings are immutable like python)</span>
<span class="w">    </span><span class="c1">-- boolean (true, false; only nil and false evaluate to false, everything else evalautes to true including 0 and &#39;&#39;)</span>
<span class="w">    </span><span class="c1">-- nil (no data; undefined variables evalaute to nil, no error is hit)</span>

<span class="nv">aNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span>
<span class="nv">anotherNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">12.890</span>
<span class="nv">aString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;watermelon&quot;</span>
<span class="nv">aMultilineString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">span</span><span class="w"> </span><span class="nv">class</span><span class="o">=</span><span class="s2">&quot;broken-wikilink&quot;</span><span class="o">&gt;</span><span class="nv">Double</span><span class="w"> </span><span class="nv">brackets</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span>
<span class="w">                      </span><span class="nv">multi</span><span class="o">-</span><span class="nv">line</span>
<span class="w">                      </span><span class="nv">string</span><span class="o">&lt;/</span><span class="nv">span</span><span class="o">&gt;</span>
<span class="nv">aBoolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="nv">aNil</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span>
<span class="nv">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">anUndefinedVariable</span><span class="w"> </span><span class="c1">-- this evaluates to nil and the program continues running</span>

<span class="c1">-- TYPE CONVERSION </span>

<span class="nb">tostring</span><span class="p">()</span><span class="w"> </span>
<span class="nb">tonumber</span><span class="p">()</span>
<span class="o">..</span><span class="w"> </span><span class="c1">-- string concatenation have implicit type conversion from number to string, though for greater readability we try to avoid this as far as possible</span>
<span class="o">+</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="c1">-- arithmetic operations have implicit type conversion from boolean to number, true =&gt; 1 and false =&gt; 0, though for greater readability we try to avoid implicit type conversions as far as possible</span>
</code></pre></div>

<h2>Operators</h2>
<div class="codehilite"><pre><span></span><code><span class="c1">-- ---------- OPERATOR ----------</span>

<span class="c1">-- ARITHMETIC OPERATOR</span>

<span class="o">+</span><span class="w"> </span><span class="c1">-- addition</span>
<span class="o">-</span><span class="w"> </span><span class="c1">-- subtraction</span>
<span class="o">*</span><span class="w"> </span><span class="c1">-- multiplication</span>
<span class="o">/</span><span class="w"> </span><span class="c1">-- divison</span>
<span class="o">%</span><span class="w"> </span><span class="c1">-- modulo</span>
<span class="o">^</span><span class="w"> </span><span class="c1">-- exponentiation (to the power of)</span>

<span class="c1">-- RELATIONAL OPERATOR</span>

<span class="o">==</span><span class="w"> </span><span class="c1">-- complete equality check of type and value</span>
<span class="o">~=</span><span class="w"> </span><span class="c1">-- complete inequality check of type and value</span>
<span class="o">&lt;</span><span class="w"> </span><span class="c1">-- comparison operator</span>
<span class="o">&gt;</span><span class="w"> </span><span class="c1">-- comparison operator</span>
<span class="o">&lt;=</span><span class="w"> </span><span class="c1">-- comparison operator</span>
<span class="o">&gt;=</span><span class="w"> </span><span class="c1">-- comparison operator</span>

<span class="c1">-- LOGICAL OPERATOR</span>

<span class="ow">and</span><span class="w"> </span><span class="c1">-- logical and</span>
<span class="ow">or</span><span class="w"> </span><span class="c1">-- logical or</span>
<span class="ow">not</span><span class="w"> </span><span class="c1">-- logical not</span>
</code></pre></div>

<h2>Control structures</h2>
<div class="codehilite"><pre><span></span><code><span class="c1">-- ---------- BLOCK -----------</span>
<span class="w">    </span><span class="c1">-- lua takes a page from bash&#39;s syntax by seperating its code blocks with do/end and indentation </span>

<span class="c1">-- ---------- IF ELSEIF ELSE THEN ----------</span>
<span class="w">    </span><span class="c1">-- standard conditionals</span>
<span class="w">    </span><span class="c1">-- there are no switch case statements in lua</span>

<span class="kr">if</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Over 40&quot;</span><span class="p">)</span>
<span class="kr">elseif</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="kr">then</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It&#39;s 20&quot;</span><span class="p">)</span>
<span class="kr">else</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Lovely&quot;</span><span class="p">)</span>

<span class="c1">-- ---------- LOOP ----------</span>

<span class="c1">-- FOR LOOP</span>
<span class="w">    </span><span class="c1">-- for {VARIABLE BEGINNING}, {VARIABLE END}, {STEP}</span>
<span class="w">    </span><span class="c1">-- ranges are inclusive on both ends</span>

<span class="kr">for</span><span class="w"> </span><span class="nv">i</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>
<span class="kr">do</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="nv">i</span><span class="p">)</span><span class="w"> </span><span class="c1">-- prints 10, 9, 8, 7, 6, 5, 4, 3, 2, 1 to the console</span>
<span class="kr">end</span>

<span class="kr">for</span><span class="w"> </span><span class="nv">q</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="w"> </span><span class="kr">do</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="nv">q</span><span class="p">)</span><span class="w"> </span><span class="c1">-- prints the numbers 1 to 100 to the console</span>
<span class="kr">end</span>

<span class="c1">-- FOR IN LOOP</span>
<span class="w">    </span><span class="c1">-- useful when looping over iterable data structures</span>

<span class="kr">for</span><span class="w"> </span><span class="nv">key</span><span class="p">,</span><span class="nv">value</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">aTable</span><span class="p">)</span><span class="w"> </span>
<span class="kr">do</span>
<span class="w">    </span><span class="nv">aTable</span><span class="p">[</span><span class="nv">key</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;i am jujutsu kaisen&quot;</span>
<span class="kr">end</span>

<span class="c1">-- WHILE LOOP</span>
<span class="w">    </span><span class="c1">-- while do loop</span>

<span class="kr">while</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="kr">do</span><span class="w"> </span>
<span class="w">    </span><span class="nv">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="kr">end</span>

<span class="c1">-- REPEAT UNTIL LOOP</span>
<span class="w">    </span><span class="c1">-- basically a do while loop</span>

<span class="nv">breakCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="kr">repeat</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;watermelon&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nv">breakCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">breakCase</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span>
<span class="kr">until</span><span class="w"> </span><span class="nv">breakCase</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>

<h2>Data structures</h2>
<div class="codehilite"><pre><span></span><code><span class="c1">-- --------- WARNING ---------</span>
<span class="w">    </span><span class="c1">-- indice count starts at 1 in lua, important for indexing</span>

<span class="c1">-- ---------- TABLE ----------</span>
<span class="w">    </span><span class="c1">-- lua&#39;s only data structure is the table, similar to PHP&#39;s associative arrays (both a dictionary and a list)</span>
<span class="w">    </span><span class="c1">-- initialised using {} curly braces</span>
<span class="w">    </span><span class="c1">-- table keys are string values by default so quotation marks are unnecessary</span>
<span class="w">    </span><span class="c1">-- table keys can also be non-string values, and are declared via literal notation</span>
<span class="w">    </span><span class="c1">-- table values can be accessed via . dot notation or [] square bracket notation</span>
<span class="w">    </span><span class="c1">-- can assign functions to a table, wherein the function name is the key and the function body is the value (using both named function / anonymous function syntax are valid)</span>
<span class="w">    </span><span class="c1">-- table functions are called using the same . dot notation as other table values</span>

<span class="nv">aTable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">key1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">key2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="nv">aTable</span><span class="p">.</span><span class="py">key1</span><span class="p">)</span><span class="w"> </span><span class="c1">-- prints the value associated with the key key1 in aTable</span>
<span class="nv">aTable</span><span class="p">.</span><span class="py">key3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="c1">-- adds a new key value pair to aTable of key key3 and value 200</span>
<span class="nv">aTable</span><span class="p">.</span><span class="py">key2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="c1">-- removes key2 from the table</span>

<span class="nv">anotherTable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{[</span><span class="s2">&quot;@!#&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;qbert&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[{}]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1729</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mf">6.29</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tau&quot;</span><span class="p">}</span><span class="w"> </span><span class="c1">-- initialise a table with non-string non-nil keys</span>
<span class="nb">print</span><span class="p">(</span><span class="nv">anotherTable</span><span class="p">[</span><span class="mf">6.29</span><span class="p">])</span><span class="w"> </span><span class="c1">-- prints the string value &quot;tau&quot;</span>

<span class="c1">-- ---------- TABLE FUNCTION ----------</span>
<span class="w">    </span><span class="c1">-- note either of the below 2 syntax are valid and achieve the same result</span>

<span class="c1">-- NAMED FUNCTION SYNTAX</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">anotherTable</span><span class="p">.</span><span class="nf">aFunction</span><span class="p">()</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello from a function!&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="nv">anotherTable</span><span class="p">.</span><span class="nf">aFunction</span><span class="p">()</span><span class="w"> </span><span class="c1">-- calls the table function, printing &quot;Hello from a function!&quot;</span>

<span class="c1">-- ANONYMOUS FUNCTION SYNTAX</span>

<span class="nv">anotherTable</span><span class="p">.</span><span class="nf">anAnonFunction</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello from an anonymous function!&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="nv">anotherTable</span><span class="p">.</span><span class="nf">anAnonFunction</span><span class="p">()</span><span class="w"> </span><span class="c1">-- calls the table function similarly, printing &quot;Hello from an anonymous function!&quot;</span>

<span class="c1">-- ---------- TABLE &#39;LIST&#39; ----------</span>
<span class="w">    </span><span class="c1">-- &#39;lists&#39; are really just tables with implicit indice keys associated with each value upon initalisation</span>
<span class="w">    </span><span class="c1">-- # for length of table (number of key value pairs)</span>

<span class="nv">aListButActuallyATable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;value2&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1.21</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="o">#</span><span class="nv">aListButActuallyATable</span><span class="p">)</span><span class="w"> </span><span class="c1">-- # returns the size of the table, this works on strings too</span>
<span class="kr">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">#</span><span class="nv">aListButActuallyATable</span><span class="w"> </span><span class="kr">do</span><span class="w">  </span><span class="c1">-- recall that indices start at 1 in lua</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="nv">v</span><span class="p">[</span><span class="nv">i</span><span class="p">])</span><span class="w"> </span><span class="c1">-- this syntax works since we&#39;re technically using tables with implicit indice keys </span>
<span class="kr">end</span>

<span class="c1">-- ---------- GLOBAL TABLE ----------</span>
<span class="w">    </span><span class="c1">-- every lua program has a special _G global table that stores all global variables and functions (global functionality)</span>
<span class="w">    </span><span class="c1">-- _G is the table name, and it has similar functionality as every other table</span>

<span class="nv">aNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span>

<span class="kr">function</span><span class="w"> </span><span class="nf">aFunction</span><span class="p">()</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello my function!&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">_G</span><span class="p">.</span><span class="nv">aNumber</span><span class="p">)</span><span class="w"> </span><span class="c1">-- prints 42</span>
<span class="nb">_G</span><span class="p">.</span><span class="nv">aFunction</span><span class="w"> </span><span class="c1">-- calls the function, printing &quot;Hello my function!&quot;</span>
<span class="nb">_G</span><span class="p">.</span><span class="nv">aNewBoolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- assigns the key aNewBoolean with value true to the global table, though this is not recommended unless explicitly necessary for the sake of producing readable code</span>

<span class="c1">-- ---------- METATABLE -----------</span>
<span class="w">    </span><span class="c1">-- metatables are tables that define and customise table behaviour</span>
<span class="w">    </span><span class="c1">-- setmetatable() sets a metamethod on a specified table, creating a metatable</span>

<span class="c1">-- ---------- METAMETHOD ----------</span>
<span class="w">    </span><span class="c1">-- functions that define specific operations on tables, lua has a set of predefined metamethods as below</span>
<span class="w">    </span><span class="c1">-- __add =&gt; define behaviour when adding 2 tables</span>
<span class="w">    </span><span class="c1">-- __sub =&gt; define behaviour when subtracting 2 tables</span>
<span class="w">    </span><span class="c1">-- __mul =&gt; define behaviour when multiplying 2 tables</span>
<span class="w">    </span><span class="c1">-- __div =&gt; define behaviour when dividing 2 tables</span>
<span class="w">    </span><span class="c1">-- __mod =&gt; define behaviour when calling modulo operator on 2 tables</span>
<span class="w">    </span><span class="c1">-- __pow =&gt; define behaviour when calling exponentiation operator on 2 tables</span>
<span class="w">    </span><span class="c1">-- __len =&gt; define behaviour when calling the # length operator on a table or string</span>
<span class="w">    </span><span class="c1">-- __unm =&gt; define behaviour when calling the unary minus operator in a table, used for negating a table</span>
<span class="w">    </span><span class="c1">-- __concat =&gt; define behaviour when calling concatenation operator on 2 tables</span>
<span class="w">    </span><span class="c1">-- __call =&gt; define behaviour when calling a table as a function</span>
<span class="w">    </span><span class="c1">-- __index =&gt; define a fallback method when accessing a table key that no longer exists</span>
<span class="w">    </span><span class="c1">-- __newindex =&gt; define behaviour when assigning a value to a table key that no longer exists</span>
<span class="w">    </span><span class="c1">-- __eq, __lt, __le =&gt; define behaviour for == equality, &lt; less than and &lt;= less than or equal to operators</span>
<span class="w">    </span><span class="c1">-- __tostring =&gt; define behaviour when converting a table to a string</span>

<span class="c1">-- attempting to simulate behaviour of fractions via tables</span>
<span class="nv">numeratorTable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
<span class="nv">denominatorTable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span>

<span class="nv">metaFraction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">-- metaFraction is just another table for now</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">metaFraction</span><span class="p">.</span><span class="nf">__add</span><span class="p">(</span><span class="nv">numeratorTable</span><span class="p">,</span><span class="w"> </span><span class="nv">denominatorTable</span><span class="p">)</span><span class="w"> </span><span class="c1">-- __add is the metamethod called on the metaFraction table to define behaviour when adding 2 tables together</span>
<span class="w">    </span><span class="nv">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="nv">sum</span><span class="p">.</span><span class="py">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">numeratorTable</span><span class="p">.</span><span class="py">b</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">denominatorTable</span><span class="p">.</span><span class="py">b</span>
<span class="w">    </span><span class="nv">sum</span><span class="p">.</span><span class="py">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">numeratorTable</span><span class="p">.</span><span class="py">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">denominatorTable</span><span class="p">.</span><span class="py">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">denominatorTable</span><span class="p">.</span><span class="py">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">numeratorTable</span><span class="p">.</span><span class="py">b</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nv">sum</span>
<span class="kr">end</span>

<span class="nb">setmetatable</span><span class="p">(</span><span class="nv">numeratorTable</span><span class="p">,</span><span class="w"> </span><span class="nv">metaFraction</span><span class="p">)</span><span class="w"> </span><span class="c1">-- by pairing the table on which the metamethod __add is called with the 2 other tables, we prescribe behaviour and thus crete metatables using the setmetatable() function</span>
<span class="nb">setmetatable</span><span class="p">(</span><span class="nv">denominatorTable</span><span class="p">,</span><span class="w"> </span><span class="nv">metaFraction</span><span class="p">)</span>

<span class="nv">newSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">numeratorTable</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">denominatorTable</span><span class="w"> </span><span class="c1">-- this now calls __add(numeratorTable, denominatorTable) on numeratorTable&#39;s metatable</span>

<span class="c1">-- ---------- CLASS-LIKE TABLE ----------</span>
<span class="w">    </span><span class="c1">-- lua has no built-in classes, though OOP behaviour can be simulated with tables and metatables</span>
<span class="w">    </span><span class="c1">-- function {TABLE NAME}:{FUNCTION NAME}() is the same as function {TABLE NAME}.{FUNCTION NAME}(self), the : just adds the self as the first argument </span>
<span class="w">    </span><span class="c1">-- self works as you would expect it to in conventional OOP, so here aDog is an object and Dog is the class</span>

<span class="nv">Dog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">-- Dog might act like a class, but remember its just a table with a metatable and metamethods prescribed on it</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">Dog</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nv">self</span><span class="p">)</span>
<span class="w">    </span><span class="nv">newObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">sound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Woof&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="nv">self</span><span class="p">.</span><span class="py">__index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">self</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nb">setmetatable</span><span class="p">(</span><span class="nv">newObject</span><span class="p">,</span><span class="w"> </span><span class="nv">self</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">Dog</span><span class="p">.</span><span class="nf">makeSound</span><span class="p">()</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I say&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">self</span><span class="p">.</span><span class="py">sound</span><span class="p">)</span>
<span class="kr">end</span>

<span class="nv">aDog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Dog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span>
<span class="nv">aDog</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span><span class="w"> </span><span class="c1">-- &quot;I say Woof&quot;</span>

<span class="c1">-- ---------- INHERITANCE ----------</span>
<span class="w">    </span><span class="c1">-- inheritance can be simulated by creating a new table off the original table and assigning new methods to that table, which is then used as a template for further tables</span>
<span class="w">    </span><span class="c1">-- since we&#39;re effectively copying keys and values off the original table, the new table template &#39;inherits&#39; the keys values and methods off the old table which aren&#39;t overriden</span>
<span class="w">    </span><span class="c1">-- remember that everything here is a table</span>

<span class="nv">loudDog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Dog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">loudDog</span><span class="p">.</span><span class="nf">makesound</span><span class="p">()</span>
<span class="w">    </span><span class="nv">sound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">self</span><span class="p">.</span><span class="py">sound</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; &quot;</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="nv">sound</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">sound</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">sound</span><span class="p">)</span>
<span class="kr">end</span>

<span class="nv">aSuperLoudDog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">loudDog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span>
<span class="nv">aSuperLoudDog</span><span class="p">:</span><span class="nf">makesound</span><span class="p">()</span><span class="w"> </span><span class="c1">-- &quot;Woof Woof Woof &quot;</span>
</code></pre></div>

<h2>Functions</h2>
<div class="codehilite"><pre><span></span><code><span class="c1">-- ---------- FUNCTIONS ----------</span>
<span class="w">    </span><span class="c1">-- function/end declares a function block</span>
<span class="w">    </span><span class="c1">-- return works as expected</span>
<span class="w">    </span><span class="c1">-- closures and anonymous functions are allowed</span>
<span class="w">    </span><span class="c1">-- functions are first-class and can be fed into other functions</span>
<span class="w">    </span><span class="c1">-- fuction scope can be specified using the local/global keyword</span>

<span class="kr">function</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="nv">n</span><span class="p">)</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>
<span class="w">    </span><span class="kr">end</span><span class="w"> </span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="nv">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="nv">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span><span class="w"> </span><span class="nf">adder</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="p">(</span><span class="nv">y</span><span class="p">)</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="kr">end</span><span class="w"> </span><span class="c1">-- returns an anonymous function which retains the value of x</span>
<span class="kr">end</span>
</code></pre></div>

<h2>Modules</h2>
<div class="codehilite"><pre><span></span><code><span class="c1">-- ---------- MODULE ----------</span>
<span class="w">    </span><span class="c1">-- require() allows for global functionality from the specified file to be brought into global scope of current file</span>
<span class="w">        </span><span class="c1">-- require()&#39;s return values are cached so a file is only run ONCE even if require() is run multiple times</span>
<span class="w">    </span><span class="c1">-- dofile() is like require() but without caching, so a file is run EVERYTIME dofile() is run</span>
<span class="w">    </span><span class="c1">-- loadfile() loads a lua file into the variable but does not run it, the variable is called again as a function to have it run</span>
<span class="w">    </span><span class="c1">-- load() is loadfile() for strings, the variable is called again as a function to have it run</span>
<span class="w">    </span><span class="c1">-- local functionality that is only ever within local scope and never brought into global scope from the specified file will be treated as invisible and unretrievable</span>
<span class="w">    </span><span class="c1">-- functionality is called using . dot notation</span>

<span class="c1">-- eg. the below code is in seperate.lua</span>

<span class="kd">local</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">sayMyName</span><span class="p">()</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You&#39;re Heisenberg&quot;</span><span class="p">)</span><span class="w">  </span>
<span class="kr">end</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">M</span><span class="p">.</span><span class="nf">sayHello</span><span class="p">()</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Why hello there&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nf">sayMyName</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">return</span><span class="w"> </span><span class="nv">M</span>

<span class="c1">-- eg. the below code is in main.lua</span>

<span class="kd">local</span><span class="w"> </span><span class="nv">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;seperate&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- require() brings in all globally scoped functionality from seperate.lua, accessed via the variable mod</span>
<span class="nv">mod</span><span class="p">.</span><span class="nf">sayHello</span><span class="p">()</span><span class="w"> </span><span class="c1">-- prints &quot;Why hello thereYou&#39;re Heisenberg&quot;, because sayHello() is in the global scope and it brings in sayMyName() despite that being only within local scope in seperate.lua</span>
<span class="nv">mod</span><span class="p">.</span><span class="nf">sayMyName</span><span class="p">()</span><span class="w"> </span><span class="c1">-- this FAILS because sayMyName() is in the local scope only</span>
</code></pre></div>

<h2>More on</h2>
<ul>
<li><a href="https://learnxinyminutes.com/docs/lua/">learn lua in y minutes</a></li>
<li><a href="http://www.lua.org/pil/contents.html">lua book</a></li>
<li><a href="https://devhints.io/lua">lua cheatsheet</a></li>
</ul>
      </section>

    </article>
    <footer>
      <p>&copy; 2023-<span id="current-year"></span> Gabriel Ong. All rights reserved.</p>
    </footer>
  </main>
  <div class="wrapper"></div>
  
</body>
</html>