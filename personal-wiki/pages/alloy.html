<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="Wiki Note: Alloy - Gabriel Ong">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Gabriel Ong">
  <meta name="robots" content="index, follow">
  
  <meta property="og:title" content="Alloy | Gabriel Ong Wiki">
  <meta property="og:description" content="Wiki Note: Alloy - Gabriel Ong">
  <meta property="og:type" content="article">
  
  <meta property="og:image" content="https://gabrielongzm.com/asset/portrait/gong-2.png">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Alloy | Gabriel Ong Wiki">
  <meta name="twitter:description" content="Wiki Note: Alloy - Gabriel Ong">
  
  <link rel="stylesheet" href="../../style.css">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntl-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntlMono-Regular-WebXL.woff2" as="font" crossorigin="anonymous">

  <style>.thin-space:after{content:"\2006"}</style>
  
  <style>pre { overflow-x: auto; max-width: 100%; }</style>

  <script src="../script.js" defer></script>
  <title>GABRIEL ONG</title>
  <link rel="shortcut icon" href="../asset/blob.ico" type="image/x-icon">
</head>
<body>
  <div id="click-container"></div>
  <input type="button" id="dark-mode">
  <label for="dark-mode">
    <img id="infinityButton" src="../asset/roller.png" height="24" width="24"/>
  </label>
  <main>
    <article class="overallArticleTags">
      
      <section class="note-header">
        <h2>Alloy</h2>
        <dl>
          <dt>File size</dt>
          <dd>57.3KB</dd>
          <dt>Lines of code</dt>
          <dd>283</dd>
        </dl>
      </section>
      <section class="note-content">
        <h1><code>Alloy</code></h1>
<p>Lightweight modeling language for software modeling and language specification. </p>
<h2>Introduction</h2>
<p>Alloy comes in two parts.</p>
<ol>
<li><a href="#alloy-language">Alloy language</a><ul>
<li>file extension <code>.als</code></li>
<li>declarative language that specifies what a system should do</li>
<li>runs on relational logic with models expressed as sets and relations</li>
<li>intuitively expresses complex structures and behaviors</li>
</ul>
</li>
<li><a href="#alloy-analyser">Alloy analyser</a><ul>
<li>tool that checks the properties of a user-specified model</li>
<li>visualization capabilities</li>
</ul>
</li>
</ol>
<h2>Alloy language</h2>
<div class="codehilite"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="o">-----</span><span class="w"> </span><span class="n">ALLOY</span><span class="w"> </span><span class="n">LANGUAGE</span><span class="w"> </span><span class="n">SYNTAX</span><span class="w"> </span><span class="n">OVERVIEW</span><span class="w"> </span><span class="o">-----</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">GENERAL</span><span class="w"> </span><span class="o">---</span>

<span class="o">//</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">declares</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">ignored</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alloy</span><span class="w"> </span><span class="n">analyser</span><span class="p">,</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">built</span><span class="o">-</span><span class="ow">in</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">multi</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">comments</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">CORE</span><span class="w"> </span><span class="n">FORMS</span><span class="w"> </span><span class="o">---</span>

<span class="o">//</span><span class="w"> </span><span class="n">sig</span><span class="w"> </span><span class="o">&lt;</span><span class="n">signatureName</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&lt;</span><span class="n">signatureBody</span><span class="o">&gt;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">declares</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">basic</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="n">curly</span><span class="w"> </span><span class="n">braces</span>
<span class="o">//</span><span class="w"> </span><span class="o">&lt;</span><span class="n">fieldName</span><span class="o">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">datatype</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">relationship</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">signatures</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">corresponding</span><span class="w"> </span><span class="n">datatype</span>
<span class="o">//</span><span class="w"> </span><span class="n">fact</span><span class="w"> </span><span class="o">&lt;</span><span class="n">factName</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&lt;</span><span class="n">factConstraintBody</span><span class="o">&gt;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">declares</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">fact</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">invariant</span><span class="w"> </span><span class="n">constraint</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">ALWAYS</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">held</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span>
<span class="o">//</span><span class="w"> </span><span class="nb">assert</span><span class="w"> </span><span class="o">&lt;</span><span class="n">assertionName</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&lt;</span><span class="n">assertionProperties</span><span class="o">&gt;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">declares</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">assertion</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">MUST</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">checked</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alloy</span><span class="w"> </span><span class="n">analyser</span>
<span class="o">//</span><span class="w"> </span><span class="n">pred</span><span class="w"> </span><span class="o">&lt;</span><span class="n">predicateName</span><span class="o">&gt;</span><span class="p">[</span><span class="w"> </span><span class="o">&lt;</span><span class="n">predicateArgument</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&lt;</span><span class="n">predicateBody</span><span class="o">&gt;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">predicate</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reusable</span><span class="w"> </span><span class="n">chunk</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">logic</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">conventional</span><span class="w"> </span><span class="n">programming</span><span class="w"> </span><span class="n">languages</span>
<span class="o">//</span><span class="w"> </span><span class="n">fun</span><span class="w"> </span><span class="o">&lt;</span><span class="n">functionName</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">&lt;</span><span class="n">functionArgument</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="p">]:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">functionReturnDatatype</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&lt;</span><span class="n">functionDefinitionBody</span><span class="o">&gt;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">value</span>
<span class="o">//</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">&lt;</span><span class="n">commandName</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">&lt;</span><span class="n">commandScope</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">direct</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alloy</span><span class="w"> </span><span class="n">analyser</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">predicate</span>
<span class="o">//</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="o">&lt;</span><span class="n">commandName</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">&lt;</span><span class="n">commandScope</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">direct</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alloy</span><span class="w"> </span><span class="n">analyser</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">assertion</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">FIELD</span><span class="w"> </span><span class="n">AUGMENTERS</span><span class="w"> </span><span class="o">---</span>

<span class="o">//</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">declares</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span>
<span class="o">//</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">indicates</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">entity</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">membership</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">relation</span>
<span class="o">//</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subset</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">another</span>
<span class="o">//</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">declares</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">exactly</span><span class="w"> </span><span class="n">ONE</span><span class="w"> </span><span class="n">element</span>
<span class="o">//</span><span class="w"> </span><span class="n">lone</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">declares</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">ZERO</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">ONE</span><span class="w"> </span><span class="n">element</span>
<span class="o">//</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">declares</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="n">ONE</span><span class="w"> </span><span class="n">element</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">SET</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">RELATION</span><span class="w"> </span><span class="n">AUGMENTERS</span><span class="w"> </span><span class="o">---</span>

<span class="o">//</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">empty</span>
<span class="o">//</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">exactly</span><span class="w"> </span><span class="n">ONE</span><span class="w"> </span><span class="n">element</span>
<span class="o">//</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="n">ONE</span><span class="w"> </span><span class="n">element</span>
<span class="o">//</span><span class="w"> </span><span class="n">lone</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">ZERO</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">ONE</span><span class="w"> </span><span class="n">element</span>
<span class="o">//</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">UNION</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">sets</span>
<span class="o">//</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">INTERSECTION</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">sets</span>
<span class="o">//</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">DIFFERENCE</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">sets</span>
<span class="o">//</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">CARTESIAN</span><span class="w"> </span><span class="n">PRODUCT</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">sets</span>
<span class="o">//</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Navigation</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">relations</span>
<span class="o">//</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Inverse</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">relation</span>
<span class="o">//</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Transitive</span><span class="w"> </span><span class="n">closure</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">relation</span>
<span class="o">//</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Reflexive</span><span class="w"> </span><span class="n">transitive</span><span class="w"> </span><span class="n">closure</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">relation</span>
<span class="o">//</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">separates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">question</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">constraint</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">predicate</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">applied</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">DATATYPES</span><span class="w"> </span><span class="o">---</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">primitive</span><span class="w"> </span><span class="n">datatypes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">alloy</span><span class="w"> </span><span class="n">language</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">purely</span><span class="w"> </span><span class="n">representative</span><span class="w"> </span><span class="n">purposes</span>

<span class="o">//</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">stores</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">value</span>
<span class="o">//</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">stores</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">value</span><span class="w"> </span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">LOGICAL</span><span class="w"> </span><span class="n">OPERATORS</span><span class="w"> </span><span class="o">---</span>

<span class="o">//</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="ow">and</span>
<span class="o">//</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="ow">or</span>
<span class="o">//</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="ow">not</span>
<span class="o">//</span><span class="w"> </span><span class="n">implies</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="n">implication</span>
<span class="o">//</span><span class="w"> </span><span class="n">iff</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="n">equivalence</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">OTHERS</span><span class="w"> </span><span class="o">---</span>

<span class="o">//</span><span class="w"> </span><span class="n">let</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">introduces</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">binding</span>
<span class="o">//</span><span class="w"> </span><span class="n">disj</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">DISTINCT</span>
<span class="o">//</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">universal</span><span class="w"> </span><span class="n">quantifier</span>
<span class="o">//</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">existential</span><span class="w"> </span><span class="n">quantifier</span>
</code></pre></div>

<h3>Specifying the model</h3>
<div class="codehilite"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="o">-----</span><span class="w"> </span><span class="n">SPECIFYING</span><span class="w"> </span><span class="n">THE</span><span class="w"> </span><span class="n">MODEL</span><span class="w"> </span><span class="o">-----</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">EXAMPLE</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">SMALL</span><span class="w"> </span><span class="n">EXPRESSION</span><span class="w"> </span><span class="n">LANGUAGE</span><span class="w"> </span><span class="o">---</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">abstract</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">small</span><span class="w"> </span><span class="n">expression</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">language</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">Expression</span><span class="p">,</span><span class="w"> </span><span class="n">Literal</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">BinaryOperation</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">constraint</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">binary</span><span class="w"> </span><span class="n">operation</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nb">assert</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">cyclic</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">language</span>

<span class="o">//</span><span class="w"> </span><span class="n">ABSTRACT</span><span class="w"> </span><span class="n">SYNTAX</span><span class="w"> </span><span class="n">DEFINITIONS</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">signatures</span><span class="p">,</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">extends</span><span class="p">)</span>

<span class="n">sig</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="p">{}</span>
<span class="n">sig</span><span class="w"> </span><span class="n">Literal</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span>
<span class="p">}</span>
<span class="n">sig</span><span class="w"> </span><span class="n">BinaryOperation</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">left</span><span class="p">:</span><span class="w"> </span><span class="n">Expression</span><span class="p">,</span>
<span class="w">  </span><span class="n">right</span><span class="p">:</span><span class="w"> </span><span class="n">Expression</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">SPECIFY</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">CONSTRAINT</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">fact</span><span class="p">)</span>

<span class="n">fact</span><span class="w"> </span><span class="n">WellFormedBinaryOperation</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">all</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">BinaryOperation</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="o">.</span><span class="n">left</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">b</span><span class="o">.</span><span class="n">right</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">CHECK</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">PROPERTY</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">assertion</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">explicit</span><span class="w"> </span><span class="n">check</span><span class="p">)</span>

<span class="nb">assert</span><span class="w"> </span><span class="n">NoCyclicExpressions</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">no</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">e</span><span class="o">.^</span><span class="p">(</span><span class="n">left</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">right</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">check</span><span class="w"> </span><span class="n">NoCyclicExpressions</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">EXAMPLE</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">FILE</span><span class="w"> </span><span class="n">SYSTEM</span><span class="w"> </span><span class="o">---</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">abstract</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">abstract</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">folder</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">folder</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">subfolders</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">constraint</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">folder</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">subfolder</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">constraint</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">cyclical</span><span class="w"> </span><span class="n">folder</span><span class="w"> </span><span class="n">structure</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">predicate</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">determine</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">folder</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">file</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">assertion</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">determine</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">exists</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">contained</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">folder</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nb">assert</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">cyclic</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">language</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">assertion</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">folders</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">files</span>

<span class="o">//</span><span class="w"> </span><span class="n">ABSTRACT</span><span class="w"> </span><span class="n">SYNTAX</span><span class="w"> </span><span class="n">DEFINITIONS</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">signatures</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">fields</span><span class="p">)</span>

<span class="n">sig</span><span class="w"> </span><span class="n">File</span><span class="w"> </span><span class="p">{}</span>
<span class="n">sig</span><span class="w"> </span><span class="n">Folder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">files</span><span class="p">:</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">File</span><span class="p">,</span>
<span class="w">    </span><span class="n">subfolders</span><span class="p">:</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">Folder</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">SPECIFY</span><span class="w"> </span><span class="n">CONSTRAINTS</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">facts</span><span class="p">)</span>

<span class="n">fact</span><span class="w"> </span><span class="n">NoFolderIsItsOwnSubfolder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">all</span><span class="w"> </span><span class="n">f</span><span class="p">:</span><span class="w"> </span><span class="n">Folder</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">!</span><span class="ow">in</span><span class="w"> </span><span class="n">f</span><span class="o">.</span><span class="n">subfolders</span>
<span class="p">}</span>

<span class="n">fact</span><span class="w"> </span><span class="n">NoCyclicFolders</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">all</span><span class="w"> </span><span class="n">f</span><span class="p">:</span><span class="w"> </span><span class="n">Folder</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">!</span><span class="ow">in</span><span class="w"> </span><span class="n">f</span><span class="o">.^</span><span class="p">(</span><span class="n">subfolders</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">CHECK</span><span class="w"> </span><span class="n">PROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">predicate</span><span class="p">,</span><span class="w"> </span><span class="n">assertion</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">explicit</span><span class="w"> </span><span class="n">check</span><span class="p">)</span>

<span class="n">pred</span><span class="w"> </span><span class="n">folderContainsFile</span><span class="p">[</span><span class="n">f</span><span class="p">:</span><span class="w"> </span><span class="n">Folder</span><span class="p">,</span><span class="w"> </span><span class="n">fl</span><span class="p">:</span><span class="w"> </span><span class="n">File</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">fl</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">f</span><span class="o">.</span><span class="n">files</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">f</span><span class="o">.*</span><span class="p">(</span><span class="n">subfolders</span><span class="p">)</span><span class="o">.</span><span class="n">files</span>
<span class="p">}</span>

<span class="nb">assert</span><span class="w"> </span><span class="n">AllFilesInFolders</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">all</span><span class="w"> </span><span class="n">fl</span><span class="p">:</span><span class="w"> </span><span class="n">File</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">f</span><span class="p">:</span><span class="w"> </span><span class="n">Folder</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">f</span><span class="o">.*</span><span class="p">(</span><span class="n">subfolders</span><span class="p">)</span><span class="o">.</span><span class="n">files</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="o">.</span><span class="n">files</span>
<span class="p">}</span>

<span class="n">check</span><span class="w"> </span><span class="n">AllFilesInFolders</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">Folder</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">File</span>

<span class="o">//</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">EXAMPLE</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">SMALL</span><span class="w"> </span><span class="n">SOCIAL</span><span class="w"> </span><span class="n">NETWORK</span><span class="w"> </span><span class="o">---</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">abstract</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Person</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">constraint</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">friend</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">constraint</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">friendship</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">mutual</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">helper</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">retrieve</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">friends</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="n">has</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nb">assert</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">persons</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">friends</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nb">assert</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">cyclic</span><span class="w"> </span><span class="n">friendships</span>

<span class="o">//</span><span class="w"> </span><span class="n">ABSTRACT</span><span class="w"> </span><span class="n">SYNTAX</span><span class="w"> </span><span class="n">DEFINITIONS</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">signatures</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">fields</span><span class="p">)</span>

<span class="n">sig</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="p">{}</span>
<span class="n">sig</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">age</span><span class="p">:</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">Int</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">friends</span><span class="p">:</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">SPECIFY</span><span class="w"> </span><span class="n">CONSTRAINTS</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">facts</span><span class="p">)</span>

<span class="n">fact</span><span class="w"> </span><span class="n">NoSelfFriend</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">all</span><span class="w"> </span><span class="n">p</span><span class="p">:</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">!</span><span class="ow">in</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">friends</span>
<span class="p">}</span>

<span class="n">fact</span><span class="w"> </span><span class="n">MutualFriendship</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">all</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">q</span><span class="p">:</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="o">.</span><span class="n">friends</span><span class="w"> </span><span class="n">iff</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">friends</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">HELPER</span><span class="w"> </span><span class="n">FUNCTION</span>

<span class="n">fun</span><span class="w"> </span><span class="n">numFriends</span><span class="p">[</span><span class="n">p</span><span class="p">:</span><span class="w"> </span><span class="n">Person</span><span class="p">]:</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#p.friends</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">CHECK</span><span class="w"> </span><span class="n">PROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="n">via</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">predicate</span><span class="p">,</span><span class="w"> </span><span class="n">assertion</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">explicit</span><span class="w"> </span><span class="n">check</span><span class="p">)</span>

<span class="n">pred</span><span class="w"> </span><span class="n">isFriend</span><span class="p">[</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">:</span><span class="w"> </span><span class="n">Person</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">p2</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">p1</span><span class="o">.</span><span class="n">friends</span>
<span class="p">}</span>

<span class="nb">assert</span><span class="w"> </span><span class="n">NoCyclicFriendship</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">no</span><span class="w"> </span><span class="n">p</span><span class="p">:</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">p</span><span class="o">.^</span><span class="n">friends</span>
<span class="p">}</span>

<span class="n">check</span><span class="w"> </span><span class="n">NoCyclicFriendship</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">5</span>
</code></pre></div>

<h2>Alloy analyser</h2>
<h3>Checking the model</h3>
<ol>
<li>Save the model or language specification as an <code>.als</code> file</li>
<li>Open the <code>.als</code> file from step 1 in the alloy analyser application</li>
<li>Set the scope of the check under the <em>Execute</em> pane</li>
<li>Run the check</li>
<li>Then<ul>
<li>if the model's assertion holds, the alloy analyser will indicate the check passed with no counterexamples found</li>
<li>if the model's assertion fails, the alloy analyser will provide a counterexample of a scenario where the assertion does not hold</li>
</ul>
</li>
</ol>
<h2>More on</h2>
<ul>
<li><a href="https://alloytools.org/download.html">install alloy analyser</a></li>
<li><a href="https://alloytools.org/">alloytools.org</a></li>
<li><a href="https://alloy.readthedocs.io/en/latest/">alloy documentation</a></li>
<li><a href="https://alloytools.org/download/alloy-language-reference.pdf">alloy language reference</a></li>
</ul>
      </section>

    </article>
    <footer>
      <p>&copy; 2023-<span id="current-year"></span> Gabriel Ong. All rights reserved.</p>
    </footer>
  </main>
  <div class="wrapper"></div>
  
</body>
</html>