<h1><code>Nix</code></h1>
<p>Powerful Linux and Unix package manager for reliable, reproducible configurations.</p>
<h2>Comments</h2>
<pre><code class="language-nix"><span class="hljs-comment"># ----- COMMENT -----</span>

<span class="hljs-comment"># this is a single-line comment</span>

<span class="hljs-comment">/*
this is a
multi-line
comment
*/</span>
</code></pre>
<h2>Printing</h2>
<pre><code class="language-nix"><span class="hljs-comment"># ----- PRINTING -----</span>
    <span class="hljs-comment"># builtins.trace =&gt; receives a string argument and a second optional argument that is then printed to the stdout and includes a newline depending on the arguments provided</span>

<span class="hljs-built_in">builtins.trace</span> <span class="hljs-string">&quot;this does not have a newline&quot;</span> <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment"># specifying an empty string as the second argument will omit the newline </span>
<span class="hljs-built_in">builtins.trace</span> <span class="hljs-string">&quot;this has a newline but only because we explicitly specified it<span class="hljs-char escape_">\n</span>&quot;</span>;
</code></pre>
<h2>Quickstart</h2>
<pre><code class="language-nix"><span class="hljs-comment"># ----- QUICKSTART -----</span>
    <span class="hljs-comment"># pure functional language, where everything is an expression and every expression must evaluate to a single value</span>
    <span class="hljs-comment"># all values in Nix are immutable by default</span>
    <span class="hljs-comment"># powerful, expressive syntax used for configuration management, package deployment, and software reproducibility within NixOS</span>
    <span class="hljs-comment"># semicolon-delimited language</span>
    <span class="hljs-comment"># let =&gt; provides variable binding of an immutable value to the specified named variable identifier</span>

<span class="hljs-comment"># --- EXAMPLE NIX PACKAGE ---</span>
    <span class="hljs-comment"># below is an example of a nix package definition</span>

{ stdenv, fetchurl }:
stdenv.mkDerivation {
    <span class="hljs-attr">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello-2.10&quot;</span>;
    <span class="hljs-attr">src</span> <span class="hljs-operator">=</span> fetchurl {
        <span class="hljs-attr">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://ftp.gnu.org/gnu/hello/hello-2.10.tar.gz&quot;</span>;
        <span class="hljs-attr">sha256</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;0ssi1wpaf7plaswqqjwigppsg5fyh99vdlb9kzl7c9lng89nd3fi&quot;</span>;
    };
    <span class="hljs-attr">buildInputs</span> <span class="hljs-operator">=</span> [ ];
    <span class="hljs-attr">meta</span> <span class="hljs-operator">=</span> {
        <span class="hljs-attr">description</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;A program that produces a familiar, friendly greeting&quot;</span>;
        <span class="hljs-attr">license</span> <span class="hljs-operator">=</span> stdenv.lib.licenses.gpl3;
    };
}
</code></pre>
<h2>Types</h2>
<pre><code class="language-nix"><span class="hljs-comment"># ----- TYPE -----</span>
    <span class="hljs-comment"># Integer =&gt; stores an integer number value</span>
    <span class="hljs-comment"># Float =&gt; stores a floating-point number value</span>
    <span class="hljs-comment"># String =&gt; stores a string value declared within &quot;&quot; double quotation marks, note that characters are handled as single-character long strings</span>
    <span class="hljs-comment"># Boolean =&gt; true, false</span>
    <span class="hljs-comment"># null =&gt; represents the absence of a value, the equivalent of void in other programming languages</span>
</code></pre>
<h2>Operators</h2>
<pre><code class="language-nix"><span class="hljs-comment"># ----- OPERATOR -----</span>

<span class="hljs-comment"># ----- ARITHMETIC OPERATORS ----- </span>

<span class="hljs-operator">+</span> <span class="hljs-comment"># addition</span>
<span class="hljs-operator">-</span> <span class="hljs-comment"># subtraction</span>
<span class="hljs-operator">*</span> <span class="hljs-comment"># multiplication</span>
<span class="hljs-symbol">/</span> <span class="hljs-comment"># division</span>
% <span class="hljs-comment"># modulo</span>

<span class="hljs-comment"># ----- COMPARISON OPERATORS -----</span>

<span class="hljs-operator">==</span> <span class="hljs-comment"># complete equality check for both value and type</span>
<span class="hljs-operator">!=</span> <span class="hljs-comment"># complete inequality check for both value and type</span>
<span class="hljs-operator">&gt;</span> <span class="hljs-comment"># comparison operator</span>
<span class="hljs-operator">&lt;</span> <span class="hljs-comment"># comparison operator</span>
<span class="hljs-operator">&gt;=</span> <span class="hljs-comment"># comparison operator</span>
<span class="hljs-operator">&lt;=</span> <span class="hljs-comment"># comparison operator</span>

<span class="hljs-comment"># ----- LOGICAL OPERATORS -----</span>

<span class="hljs-operator">&amp;&amp;</span> <span class="hljs-comment"># logical and</span>
<span class="hljs-operator">||</span> <span class="hljs-comment"># logical or</span>
<span class="hljs-operator">!</span> <span class="hljs-comment"># logical not</span>
</code></pre>
<h2>Control structures</h2>
<pre><code class="language-nix"><span class="hljs-comment"># ----- CONTROL STRUCTURE -----</span>

<span class="hljs-comment"># --- CONDITIONALS ---</span>

IF ELSE IF ELSE

<span class="hljs-keyword">let</span>
    <span class="hljs-attr">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">25</span>;
<span class="hljs-keyword">in</span>
    <span class="hljs-keyword">if</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">13</span> <span class="hljs-keyword">then</span>
        <span class="hljs-string">&quot;Child&quot;</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
        <span class="hljs-string">&quot;Teenager&quot;</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">65</span> <span class="hljs-keyword">then</span>
        <span class="hljs-string">&quot;Adult&quot;</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-string">&quot;Senior&quot;</span>

<span class="hljs-comment"># --- LOOPS ---</span>
    <span class="hljs-comment"># there are no traditional loop constructs in Nix as in other programming languages</span>
    <span class="hljs-comment"># instead, Nix relies on recursion and other higher-order functions to handle iteration and traversal of iterable data structures</span>

<span class="hljs-comment"># RECURSION</span>

<span class="hljs-keyword">let</span>
    <span class="hljs-attr">factorial</span> <span class="hljs-operator">=</span> <span class="hljs-params">n:</span> <span class="hljs-keyword">if</span> n <span class="hljs-operator">==</span> <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> n <span class="hljs-operator">*</span> factorial (n <span class="hljs-operator">-</span> <span class="hljs-number">1</span>);
<span class="hljs-keyword">in</span>
    factorial <span class="hljs-number">5</span>

<span class="hljs-comment"># HIGHER-ORDER FUNCTIONS</span>
    <span class="hljs-comment"># below are examples of some higher-order functions in Nix such as </span>
        <span class="hljs-comment"># map =&gt; applies a specified function to each element of the iterable data structure</span>
        <span class="hljs-comment"># filter =&gt; selects elements of a list that satisfy the specified predicate condition</span>
        <span class="hljs-comment"># fold =&gt; reduces a list to a single value using a specified binary function, the equivalent of reduce in other programming languages</span>

<span class="hljs-keyword">let</span>
    <span class="hljs-attr">myList</span> <span class="hljs-operator">=</span> [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span>];
    <span class="hljs-attr">square</span> <span class="hljs-operator">=</span> <span class="hljs-params">x:</span> x <span class="hljs-operator">*</span> x;
    <span class="hljs-attr">squaredList</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">map</span> square myList;
<span class="hljs-keyword">in</span>
    squaredList 

<span class="hljs-keyword">let</span>
    <span class="hljs-attr">myList</span> <span class="hljs-operator">=</span> [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span>];
    <span class="hljs-attr">isEven</span> <span class="hljs-operator">=</span> <span class="hljs-params">x:</span> x % <span class="hljs-number">2</span> <span class="hljs-operator">==</span> <span class="hljs-number">0</span>;
    <span class="hljs-attr">evenList</span> <span class="hljs-operator">=</span> filter isEven myList;
<span class="hljs-keyword">in</span>
    evenList

<span class="hljs-keyword">let</span>
    <span class="hljs-attr">myList</span> <span class="hljs-operator">=</span> [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span>];
    <span class="hljs-attr">sum</span> <span class="hljs-operator">=</span> foldl (<span class="hljs-params">acc:</span> <span class="hljs-params">x:</span> acc <span class="hljs-operator">+</span> x) <span class="hljs-number">0</span> myList;
<span class="hljs-keyword">in</span>
    sum 
</code></pre>
<h2>Data structures</h2>
<pre><code class="language-nix"><span class="hljs-comment"># ----- DATA STRUCTURE -----</span>
    <span class="hljs-comment"># list =&gt; fixed-size immutable ordered collection of elements of multiple datatypes, declared within [] square brackets, featuring lazy evaluation</span>
    <span class="hljs-comment"># attribute set =&gt; fixed-size immutable unordered collection of key-value pairs with string keys and values of multiple datatypes, the equivalent of dictionaries in Python and maps in other programming langauges, declared within {} curly braces</span>

<span class="hljs-keyword">let</span>
    <span class="hljs-attr">anExampleAttributeSet</span> <span class="hljs-operator">=</span> {
        <span class="hljs-attr">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;example&quot;</span>;
        <span class="hljs-attr">version</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1.0&quot;</span>;
    };
<span class="hljs-keyword">in</span>
    anExampleAttributeSet.name <span class="hljs-comment"># evaluates to &quot;example&quot; string literal</span>

<span class="hljs-keyword">let</span>
    <span class="hljs-attr">anExampleList</span> <span class="hljs-operator">=</span> [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>];
<span class="hljs-keyword">in</span>
    anExampleList <span class="hljs-comment"># evaluates to [1 2 3] list literal</span>
</code></pre>
<h2>Functions</h2>
<pre><code class="language-nix"><span class="hljs-comment"># ----- FUNCTION -----</span>
    <span class="hljs-comment"># &lt;functionName&gt; = &lt;functionParameter1Name : functionParameter2Name : etc...&gt; : &lt;functionDefinitionBody&gt; =&gt; definition and declaration of a named function</span>
    <span class="hljs-comment"># as a functional language, Nix features implicit return of the last expression within a function body</span>

<span class="hljs-attr">myFunction</span> <span class="hljs-operator">=</span> <span class="hljs-params">x:</span> x <span class="hljs-operator">+</span> <span class="hljs-number">1</span>; <span class="hljs-comment"># named function with a single argument</span>
myFunction <span class="hljs-number">5</span> <span class="hljs-comment"># evaluates to 6</span>

<span class="hljs-attr">myAdd</span> <span class="hljs-operator">=</span> <span class="hljs-params">a:</span> <span class="hljs-params">b:</span> a <span class="hljs-operator">+</span> b; <span class="hljs-comment"># named function with multiple arguments</span>
myAdd <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-comment"># evaluates to 5</span>
</code></pre>
<h2>More on</h2>
<ul>
<li><a href="https://nixos.org/">nixos.org</a></li>
<li><a href="https://nix.dev/reference/nix-manual.html">nix documentation</a></li>
<li><a href="https://learnxinyminutes.com/docs/nix/">learn nix in y minutes</a></li>
<li><a href="https://zero-to-nix.com/">zero to nix</a></li>
<li><a href="https://ops.functionalalgebra.com/nix-by-example/">nix by example</a></li>
<li><a href="https://web.archive.org/web/20210121042658/https://ebzzry.io/en/nix/#nix">a gentle introduction to the nix family</a></li>
</ul>
