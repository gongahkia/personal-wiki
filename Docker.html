<h1><code>Docker</code></h1>
<p>The lightweight VM of the future.</p>
<h2>Quickstart</h2>
<p>Docker allows for packaging and replication of a program's required environment on any machine, enabling rapid build, test and ship times.</p>
<ul>
<li><strong>docker image</strong>: package that includes code, system tools, libraries, runtime</li>
<li><strong>docker container</strong>: executable instance of a docker image, encapsulating the runtime environment, application code and dependencies</li>
</ul>
<h2>Docker CLI</h2>
<pre><code class="language-bash"><span class="hljs-comment"># ---------- DOCKER CLI -----------</span>

<span class="hljs-comment"># GENERAL</span>
    <span class="hljs-comment"># docker help =&gt; shows a helplist of all useful docker commands</span>

<span class="hljs-comment"># IMAGES</span>
    <span class="hljs-comment"># docker build {PATH TO DOCKERFILE} =&gt; builds a Docker image from the specified Dockerfile, where the path can be a local file extension or a URL, images are rebuilt whenever a change is made in the Dockerfile</span>
    <span class="hljs-comment"># docker pull {IMAGE NAME} =&gt; similar to git pull, downloads the specified image from Docker Hub</span>
    <span class="hljs-comment"># docker create {IMAGE NAME} =&gt; creates a new container with the specified image but does not run the container automatically like docker run, docker start must be used to then run this container</span>
    <span class="hljs-comment"># docker images =&gt; displays all docker images and their metadata</span>
    <span class="hljs-comment"># docker rmi =&gt; removes one or more docker images if they do not have a container instance currently running</span>

<span class="hljs-comment"># CONTAINERS</span>
    <span class="hljs-comment"># docker run {CONTAINER NAME} =&gt; runs the specified docker container and can be augmented with flags, docker will pull the required image from Docker Hub and build the container if the container is not found, then run it</span>
        <span class="hljs-comment"># -d =&gt; detach flag runs a container in the background and returns to the main terminal</span>
        <span class="hljs-comment"># -p {INNER PORT NUMBER:OUTER PORT NUMBER} =&gt; publish flag exposes the specified inner port to the specified port outside the container since the app&#x27;s runtime is isolated within a given docker container</span>
        <span class="hljs-comment"># -i =&gt; input flag runs the docker container in an interactive mode, which accepts inputs and responds dynamically to said inputs while running the app, by default docker is in non-interactive mode and does not accept user input</span>
        <span class="hljs-comment"># -t =&gt; terminal flag often used in conjunction with the -i input flag (-it), creates a pseudo-terminal that the shell can latch onto</span>
    <span class="hljs-comment"># docker ps =&gt; only shows running containers </span>
        <span class="hljs-comment"># -a =&gt; all flag specifies to show all containers</span>
    <span class="hljs-comment"># docker start {CONTAINER NAME} =&gt; starts the specified container</span>
    <span class="hljs-comment"># docker stop {CONTAINER NAME} =&gt; stops the specified container</span>
    <span class="hljs-comment"># docker rm {CONTAINER ID} =&gt; removes a docker container based on the specified container ID</span>
    <span class="hljs-comment"># docker exec {CONTAINER ID} {COMMAND} =&gt; runs a command in the specified container based on container ID</span>
    <span class="hljs-comment"># docker logs {CONTAINER ID} =&gt; displays console information logged by the specified container based on container ID</span>

$ docker run parklane-cai-fan <span class="hljs-comment"># assuming the container is not found on my machine, docker pulls the parklane-cai-fan image from Docker Hub, builds the container, and runs it</span>
$ docker run -d parklane-cai-fan <span class="hljs-comment"># detaches the container from the terminal</span>
$ docker run 10f10 -p 3000:8000 <span class="hljs-comment"># exposes port 8000 within the parklane-cai-fan container (of container ID 10f10) to the exterior port 3000 outside the container</span>
$ docker stop parklane-cai-fan <span class="hljs-comment"># stops the docker container parklane-cai-fan from running</span>
$ docker start parklane-cai-fan <span class="hljs-comment"># starts the docker container parklane-cai-fan and runs it</span>

$ docker ps -a <span class="hljs-comment"># displays all containers, including those not currently running</span>

$ docker create isle-eating-house <span class="hljs-comment"># creates a new container from the image isle-eating-house, but does not run it</span>
$ docker <span class="hljs-built_in">rm</span> 82f82 <span class="hljs-comment"># removes the container isle-eating-house based on its container ID 82f82</span>

$ docker images <span class="hljs-comment"># displays all existing docker images on your machine</span>
$ docker rmi <span class="hljs-comment"># removes all docker images that do not currently have a docker container running</span>
$ docker pull a1-dumplings <span class="hljs-comment"># pulls the a1-dumplings image from Docker Hub and downloads it to our machine</span>

$ docker <span class="hljs-built_in">exec</span> 77b77 <span class="hljs-built_in">ls</span> <span class="hljs-comment"># runs the command &#x27;ls&#x27; in the a1-dumplings container (of container ID 77b77) </span>
$ docker logs 77b77 <span class="hljs-comment"># displays the console output displayed to the stdout from the executed &#x27;ls&#x27; command issued to the a1-dumplings container</span>

$ docker build Desktop/coding/proj/Dockerfile <span class="hljs-comment"># builds an image from the Dockerfile at the specified local file extension</span>
</code></pre>
<h2>Dockerfile</h2>
<ul>
<li>file name must be <code>Dockerfile</code> with no extension (similar to a Makefile)</li>
<li>blueprint of a Docker image</li>
<li>enables further configuration of existing Docker base images</li>
</ul>
<pre><code class="language-dockerfile"><span class="hljs-comment"># ---------- DOCKERFILE ----------</span>
    <span class="hljs-comment"># FROM {BASE IMAGE NAME} =&gt; specifies the base image the Dockerfile should be created from </span>
    <span class="hljs-comment"># ENV {ENVIRONMENT VARIABLES} =&gt; specifies further environment variables as required</span>
    <span class="hljs-comment"># RUN {LINUX COMMANDS} =&gt; runs any linux commands within the creation of the Docker image</span>
    <span class="hljs-comment"># COPY {SOURCE LOCATION} {TARGET LOCATION} =&gt; copies files from the source location (usually the host machine) to the target location (usually within the Docker container)</span>
    <span class="hljs-comment"># ENTRYPOINT [{SCRIPT NAME}] =&gt; executes an entire specified script as an entrypoint for the setup of the Docker image</span>
    <span class="hljs-comment"># CMD [{LIST OF ARGUMENTS}] =&gt; always a part of every Dockerfile, this is a list of default commands to run whenever the Docker image has been created and the Docker container is running</span>

<span class="hljs-keyword">FROM</span> parklane-cai-fan <span class="hljs-comment"># defines the base Docker image</span>

<span class="hljs-keyword">ENV</span> USERNAME=<span class="hljs-string">&#x27;admin&#x27;</span>\
    PWD=<span class="hljs-string">&#x27;watermelon&#x27;</span> <span class="hljs-comment"># defines some environment variables</span>

<span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">sudo</span> apt-get upgrade &amp;&amp; <span class="hljs-built_in">sudo</span> apt-get update &amp;&amp; <span class="hljs-built_in">sudo</span> apt-get autoremove &amp;&amp; <span class="hljs-built_in">mkdir</span> ~/.customConfig <span class="hljs-comment"># runs the specified linux commands</span></span>

<span class="hljs-keyword">COPY</span><span class="language-bash"> ~/.vimrc ~/.customConfig <span class="hljs-comment"># copies the specified file .vimrc from local machine to within the Docker container</span></span>

<span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;watermelon.sh&quot;</span>] <span class="hljs-comment"># executes the watermelon.sh script as an entrypoint</span></span>

<span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;python&quot;</span>, <span class="hljs-string">&quot;uncleTopia.py&quot;</span>] <span class="hljs-comment"># defines the default commands to run when the Docker container starts up</span></span>
</code></pre>
<h2>More on</h2>
<ul>
<li><a href="https://learnxinyminutes.com/docs/docker/">pushing docker images to Docker Hub</a></li>
<li><a href="https://docs.docker.com/get-docker/">install docker</a></li>
<li><a href="https://hub.docker.com/">docker hub</a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/">dockerfile documentation</a></li>
</ul>
