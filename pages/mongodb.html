<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="Wiki Note: MongoDB - Gabriel Ong">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../style.css">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntl-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntlMono-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  <style>
    .thin-space:after{content:"\2006"}
    pre {
      overflow-x: auto;
      max-width: 100%;
    }
  </style>
  <script src="../script.js" defer></script>
  <title>GABRIEL ONG</title>
  <link rel="shortcut icon" href="../asset/blob.ico" type="image/x-icon">
</head>
<body>
  <div id="click-container"></div>
  <input type="button" id="dark-mode">
  <label for="dark-mode">
    <img id="infinityButton" src="../asset/roller.png" height="24" width="24"/>
  </label>

  <main>
    <article class="overallArticleTags">

      <section class="note-header">
        <h2>MongoDB</h2>

        <dl>
          <dt>File size</dt>
          <dd>23.4KB</dd>

          <dt>Lines of code</dt>
          <dd>267</dd>
        </dl>
      </section>

      <section class="note-content">
        <h1><code>MongoDB</code></h1>
<p><a href="https://www.mongodb.com/resources/basics/databases/nosql-explained">NoSQL document database</a> that excels at high volume data storage.</p>
<h2>Quickstart</h2>
<ul>
<li>MongoDB stores data in documents and collections with a JSON-like syntax <em>(key-value pairs)</em> similar to Python dictionaries and Javascript objects</li>
<li>Mongo Query Language (MQL) uses JSON to query data</li>
<li>Documents are equivalent to rows (records) in MySQL</li>
<li>Collections hold one or more Binary JSON (BSON) documents, equivalent to tables in MySQL</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- QUICKSTART -----------</span>

<span class="c1"># ------- COMMANDS -------</span>
<span class="w">    </span><span class="c1"># mongod =&gt; starts up the mongo database server shell</span>
<span class="w">        </span><span class="c1"># &quot;&lt;server_address&gt;&quot; --username &lt;username&gt; =&gt; receives an optional argument in the format of &quot;mongodb+srv://host.ip.address/admin&quot; --username your-username that allows connection to a remote server</span>
<span class="w">    </span><span class="c1"># exit =&gt; quits the mongo database server shell</span>

mongod<span class="w"> </span>
<span class="nb">exit</span>

<span class="c1"># ----- GENERAL -----</span>
<span class="w">    </span><span class="c1"># show dbs =&gt; lists available databases</span>
<span class="w">    </span><span class="c1"># show collections =&gt; lists available collections under a database</span>
<span class="w">    </span><span class="c1"># db.createCollection() =&gt; creates a new collection under the specified name</span>
<span class="w">    </span><span class="c1"># use &lt;database_name&gt; =&gt; selects a given database as the current one in use</span>
<span class="w">    </span><span class="c1"># db.dropDatabase() =&gt; drops all documents from every collection within the current database</span>

<span class="c1"># --- NOTE!!! ---</span>
<span class="w">    </span><span class="c1"># inserting a document implictly creates a new collection</span>
<span class="w">    </span><span class="c1"># inserting data into a collection implicitly creates a new database</span>
<span class="w">    </span><span class="c1"># the update method always calls the $set operator</span>

show<span class="w"> </span>dbs

use<span class="w"> </span>employees

db.createCollection<span class="o">(</span><span class="s1">&#39;engineers&#39;</span><span class="o">)</span>
db.createCollection<span class="o">(</span><span class="s1">&#39;doctors&#39;</span><span class="o">)</span>

show<span class="w"> </span>collections

db.dropDatabase<span class="o">()</span>

<span class="c1"># ----- CRUD OPERATIONS -----</span>

<span class="c1"># --- CREATE (INSERT) ---</span>
<span class="w">    </span><span class="c1"># every insertion call returns a boolean true or false</span>
<span class="w">    </span><span class="c1"># every document (row/record) has a unique _id meta tag automatically assigned to it as its unique identification</span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.insertOne() =&gt; receives a JSON-style object within curly braces {} as an argument, inserts the object to the collection</span>
<span class="w">        </span><span class="c1"># empty objects can be inserted into the collection without issue</span>
<span class="w">        </span><span class="c1"># object fields are also optional and do not necesarilly have to match the intially declared fields</span>
<span class="w">        </span><span class="c1"># object field types can vary and are preserved upon insertion</span>
<span class="w">        </span><span class="c1"># object fields can be deeply nested within layers of a document </span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.insert() =&gt; receives an array of JSON-style objects with each object declared within curly braces {} as an argument, inserts all the objects to the collection</span>
<span class="w">    </span><span class="c1"># _id =&gt; meta id tag (equivalent of a UID in MySQL) can be manually overriden as an object field</span>
<span class="w">        </span><span class="c1"># note that _id meta id tag must ALWAYS be unqiue similar to other databases, and duplicate _id meta tags will result in failed insertion and a WriteError</span>

db.engineers.insertOne<span class="o">({</span><span class="w"> </span>name:<span class="w"> </span><span class="s2">&quot;Jane Doe&quot;</span>,<span class="w"> </span>age:<span class="w"> </span><span class="m">21</span>,<span class="w"> </span>gender:<span class="w"> </span><span class="s1">&#39;Female&#39;</span><span class="w"> </span><span class="o">})</span>
db.engineers.insert<span class="o">([</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span>name:<span class="w"> </span><span class="s2">&quot;Foo Bar&quot;</span>,<span class="w"> </span>age:<span class="w"> </span><span class="m">25</span>,<span class="w"> </span>gender:<span class="w"> </span><span class="s1">&#39;Male&#39;</span><span class="w"> </span><span class="o">}</span>,
<span class="w">  </span><span class="o">{</span><span class="w"> </span>name:<span class="w"> </span><span class="s2">&quot;Baz Qux&quot;</span>,<span class="w"> </span>age:<span class="w"> </span><span class="m">27</span>,<span class="w"> </span>gender:<span class="w"> </span><span class="s1">&#39;Other&#39;</span><span class="w"> </span><span class="o">}</span>,
<span class="o">])</span>

db.engineers.insertOne<span class="o">({})</span><span class="w"> </span><span class="c1"># empty object</span>
db.engineers.insertOne<span class="o">({</span><span class="w"> </span>name:<span class="w"> </span><span class="s2">&quot;Your Name&quot;</span>,<span class="w"> </span>gender:<span class="w"> </span><span class="s2">&quot;Male&quot;</span><span class="w"> </span><span class="o">})</span><span class="w"> </span><span class="c1"># fields missing</span>
db.engineers.insert<span class="o">({</span><span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Foo&#39;</span>,<span class="w"> </span><span class="s1">&#39;Bar&#39;</span><span class="o">]</span>,<span class="w"> </span>age:<span class="w"> </span><span class="m">3</span>.14,<span class="w"> </span>gender:<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">})</span><span class="w"> </span><span class="c1"># fields have wrong type</span>
db.engineers.insertOne<span class="o">({</span><span class="w"> </span><span class="c1"># nested declaration of an object document</span>
<span class="w">  </span>name:<span class="w"> </span><span class="s2">&quot;Your Name&quot;</span>,
<span class="w">  </span>gender:<span class="w"> </span><span class="s2">&quot;Female&quot;</span>,
<span class="w">  </span>skilledIn:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="s2">&quot;MongoDB&quot;</span>,
<span class="w">    </span><span class="s2">&quot;NoSQL&quot;</span>,
<span class="w">  </span><span class="o">]</span>,
<span class="w">  </span><span class="s2">&quot;date-of-birth&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;date&quot;</span>:<span class="w"> </span><span class="m">1993</span>-07-20T09:44:18.674Z,
<span class="w">    </span><span class="s2">&quot;age&quot;</span>:<span class="w"> </span><span class="m">26</span>
<span class="w">  </span><span class="o">}</span>,
<span class="o">})</span>

db.engineers.insertOne<span class="o">({</span>
<span class="w">  </span>_id:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="c1"># overidding the ID tag within the object document insertion declaration</span>
<span class="w">  </span>name:<span class="w"> </span><span class="s2">&quot;An Engineer&quot;</span>,
<span class="w">  </span>age:<span class="w"> </span><span class="m">25</span>,
<span class="w">  </span>gender:<span class="w"> </span><span class="s2">&quot;Female&quot;</span>,
<span class="o">})</span>

db.engineers.insertOne<span class="o">({</span>
<span class="w">  </span>_id:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="c1"># results in a WriteError due to duplicate _id meta ID tags being inserted</span>
<span class="w">  </span>name:<span class="w"> </span><span class="s2">&quot;Another Engineer&quot;</span>,
<span class="w">  </span>age:<span class="w"> </span><span class="m">25</span>,
<span class="w">  </span>gender:<span class="w"> </span><span class="s2">&quot;Male&quot;</span>,
<span class="o">})</span>

<span class="c1"># --- READ (FIND) ---</span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.findOne(&lt;query_object&gt;) =&gt; searches for documents similar to the specified query object and returns the FIRST document matching the given query</span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.find(&lt;query_object&gt;) =&gt; searches for all documents similar to the specified query object and returns ALL documents matching the given query as a CURSOR (can be converted to an array)</span>
<span class="w">        </span><span class="c1"># display of documents is limited to 20 at a time</span>
<span class="w">        </span><span class="c1"># empty objects {} are accepted as an argument, and will return every document in the current collection</span>
<span class="w">        </span><span class="c1"># datatypes of fields specified within the query object matter, and must be accurate for a successful query</span>
<span class="w">        </span><span class="c1"># supports nested query objects and fields</span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.find(&lt;query_object&gt;).pretty() =&gt; queries the database for the specified query object and formats the returned document records before printing them to the stdout</span>

db.engineers.findOne<span class="o">({</span><span class="w"> </span>name:<span class="w"> </span><span class="s1">&#39;Foo Bar&#39;</span><span class="w"> </span><span class="o">})</span>
db.engineers.find<span class="o">({})</span>
db.engineers.find<span class="o">({})</span>.pretty<span class="o">()</span>
db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">})</span>

db.engineers.find<span class="o">({</span>
<span class="w">  </span>name:<span class="w"> </span><span class="s2">&quot;Your Name&quot;</span>,
<span class="w">  </span>gender:<span class="w"> </span><span class="s2">&quot;Female&quot;</span>,
<span class="w">  </span>skilledIn:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="s2">&quot;MongoDB&quot;</span>,
<span class="w">    </span><span class="s2">&quot;NoSQL&quot;</span>,
<span class="w">  </span><span class="o">]</span>,
<span class="w">  </span><span class="s2">&quot;date-of-birth&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;date&quot;</span>:<span class="w"> </span><span class="m">1993</span>-07-20T09:44:18.674Z,
<span class="w">    </span><span class="s2">&quot;age&quot;</span>:<span class="w"> </span><span class="m">26</span>
<span class="w">  </span><span class="o">}</span>,
<span class="o">})</span>

<span class="c1"># --- UPDATE ---</span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.updateOne(&lt;query_object&gt;, &lt;updated_value&gt;) =&gt; queries the database per the specified query object and updates the FIRST instance of a matched document record</span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.update(&lt;query_object&gt;, &lt;updated_value&gt;) =&gt; queries the database per the specified query object and updates ALL instances of matched document records </span>
<span class="w">    </span><span class="c1"># {upsert:true} =&gt; added as an optional argument to the update query to insert the specified update document value if the queried document does not already exist and no matches have been found, and to simply update the matched document if any are found</span>
<span class="w">        </span><span class="c1"># returns matched, upserted, modified_count as values</span>

db.engineers.updateOne<span class="o">({</span><span class="w"> </span>name:<span class="w"> </span><span class="s1">&#39;Foo Bar&#39;</span><span class="w"> </span><span class="o">}</span>,<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$set</span>:<span class="w"> </span><span class="o">{</span><span class="w"> </span>name:<span class="w"> </span><span class="s1">&#39;John Doe&#39;</span>,<span class="w"> </span>age:<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="o">}})</span>
db.engineers.update<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">}</span>,<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$set</span>:<span class="w"> </span><span class="o">{</span><span class="w"> </span>age:<span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="o">}})</span>

db.engineers.update<span class="o">({</span><span class="w"> </span>name:<span class="w"> </span><span class="s1">&#39;Foo Baz&#39;</span><span class="w"> </span><span class="o">}</span>,
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="nv">$set</span>:
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span>age:<span class="w"> </span><span class="m">26</span>,
<span class="w">      </span>gender:<span class="w"> </span><span class="s1">&#39;Other&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">}</span>,
<span class="w">  </span><span class="o">{</span><span class="w"> </span>upsert:<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">}</span>
<span class="o">)</span>

<span class="c1"># --- DELETE ---</span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.deleteOne(&lt;query_object&gt;) =&gt; queries the database per the specified query object and deletes the FIRST instance of a document matching the query</span>
<span class="w">        </span><span class="c1"># returns deleted_count</span>
<span class="w">    </span><span class="c1"># db.&lt;collection_name&gt;.deleteMany(&lt;query_object&gt;) =&gt; queries the database per the specified query object and deletes ALL instances of documents matching the query</span>
<span class="w">        </span><span class="c1"># returns deleted_count</span>

db.engineers.deleteOne<span class="o">({</span><span class="w"> </span>name:<span class="w"> </span><span class="s1">&#39;Foo Baz&#39;</span><span class="w"> </span><span class="o">})</span>
db.engineers.deleteMany<span class="o">({</span><span class="w"> </span>gender:<span class="w"> </span><span class="s1">&#39;Male&#39;</span><span class="w"> </span><span class="o">})</span>

<span class="c1"># ----- OPERATORS -----</span>
<span class="w">    </span><span class="c1"># all operators are prefixed by the $ dollarsign character</span>

<span class="c1"># --- COMPARISON OPERATORS ---</span>
<span class="w">    </span><span class="c1"># $gt =&gt; finds all values greater than the specified value</span>
<span class="w">    </span><span class="c1"># $gte =&gt; finds all values greater than or equal to the specified value</span>
<span class="w">    </span><span class="c1"># $lt =&gt; finds all values less than the specified value</span>
<span class="w">    </span><span class="c1"># $lte =&gt; finds all values less than or equal to the specified value</span>
<span class="w">    </span><span class="c1"># $eq =&gt; finds all values equal to the specified value</span>
<span class="w">        </span><span class="c1"># the $eq operator is added implicitly to most queries (for obvious reasons)</span>
<span class="w">    </span><span class="c1"># $ne =&gt; finds all values not equal to the specified value</span>
<span class="w">    </span><span class="c1"># $in =&gt; finds any values that match a given element of a specified array, checking for membership within a specified array</span>
<span class="w">    </span><span class="c1"># $nin =&gt; finds any values that do not match a given element of a specified array, checking for absence from a specified array</span>

db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$gt</span>:<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">}})</span>
db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$gte</span>:<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">}})</span>
db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$lt</span>:<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">}})</span>
db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$lte</span>:<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">}})</span>
db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$eq</span>:<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">}})</span>
db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$ne</span>:<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">}})</span>
db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$in</span>:<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">20</span>,<span class="w"> </span><span class="m">23</span>,<span class="w"> </span><span class="m">24</span>,<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">]}})</span>
db.engineers.find<span class="o">({</span><span class="w"> </span>age:<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="nv">$nin</span>:<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">20</span>,<span class="w"> </span><span class="m">23</span>,<span class="w"> </span><span class="m">24</span>,<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">]}})</span>

<span class="c1"># --- LOGICAL OPERATORS ---</span>
<span class="w">    </span><span class="c1"># $and =&gt; joins two query clauses together</span>
<span class="w">        </span><span class="c1"># the $and operator is implicitly tagged to most queries (for obvious reasons)</span>
<span class="w">    </span><span class="c1"># $or =&gt; either one of two query conditions has to be matched</span>
<span class="w">    </span><span class="c1"># $not =&gt; negates the attached query condition</span>
<span class="w">    </span><span class="c1"># $nor =&gt; must avoid matching any of the specified query conditions</span>

db.engineers.find<span class="o">({</span><span class="w"> </span><span class="nv">$and</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">  </span>gender:<span class="w"> </span><span class="s1">&#39;Female&#39;</span>,
<span class="w">  </span>age:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">$gte</span>:<span class="w"> </span><span class="m">18</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">]})</span>

db.engineers.find<span class="o">({</span><span class="w"> </span><span class="nv">$or</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">  </span>gender:<span class="w"> </span><span class="s1">&#39;Female&#39;</span>,
<span class="w">  </span>age:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">$gte</span>:<span class="w"> </span><span class="m">18</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">]})</span>

db.engineers.find<span class="o">({</span><span class="w"> </span><span class="nv">$not</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">  </span>gender:<span class="w"> </span><span class="s1">&#39;Female&#39;</span>
<span class="o">}})</span>

db.engineers.find<span class="o">({</span><span class="w"> </span><span class="nv">$nor</span><span class="w"> </span><span class="o">[</span>
<span class="w">  </span>gender:<span class="w"> </span><span class="s1">&#39;Female&#39;</span>,
<span class="w">  </span>age:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">$gte</span>:<span class="w"> </span><span class="m">18</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">]})</span>
</code></pre></div>

<h2>More on</h2>
<ul>
<li><a href="https://www.mongodb.com/docs/manual/installation/">install MongoDB</a></li>
<li><a href="https://www.mongodb.com/docs/manual/reference/bson-types/">BSON supported datatypes</a></li>
<li><a href="https://www.mongodb.com/docs/manual/reference/operator/">operators in MongoDB</a></li>
<li><a href="https://learnxinyminutes.com/docs/mongodb/">learn MongoDB in y minutes</a></li>
<li><a href="https://university.mongodb.com/">MongoDB univeristy</a></li>
<li><a href="https://youtu.be/-56x56UppqQ?si=b0hxc7LeN9YtXJWk">MongoDB crash course</a></li>
</ul>
      </section>

    </article>

    <footer>
      <p>© 2023-<span id="current-year"></span> Gabriel Ong. All rights reserved.</p>
    </footer>
  </main>

  <div class="wrapper"></div>
</body>
</html>
