<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="Wiki Note: Crystal - Gabriel Ong">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../style.css">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntl-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntlMono-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  <style>
    .thin-space:after{content:"\2006"}
    pre {
      overflow-x: auto;
      max-width: 100%;
    }
  </style>
  <script src="../script.js" defer></script>
  <title>GABRIEL ONG</title>
  <link rel="shortcut icon" href="../asset/blob.ico" type="image/x-icon">
</head>
<body>
  <div id="click-container"></div>
  <input type="button" id="dark-mode">
  <label for="dark-mode">
    <img id="infinityButton" src="../asset/roller.png" height="24" width="24"/>
  </label>

  <main>
    <article class="overallArticleTags">

      <section class="note-header">
        <h2>Crystal</h2>

        <dl>
          <dt>File size</dt>
          <dd>21.6KB</dd>

          <dt>Lines of code</dt>
          <dd>295</dd>
        </dl>
      </section>

      <section class="note-content">
        <h1><code>Crystal</code></h1>
<h2>Comments</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- COMMENT ----------</span>

<span class="c1"># this is a single-line comment</span>
<span class="c1"># there is no built-in syntax for multi-line comments</span>
</code></pre></div>

<h2>Quickstart</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- QUICKSTART ---------- </span>
<span class="w">    </span><span class="c1"># ruby-like syntax with implicit static type-checking</span>
<span class="w">    </span><span class="c1"># transpiles to C code with native Crystal bindings, allowing for high-level features with low-level focus on performance</span>
<span class="w">    </span><span class="c1"># everything is an object in Crystal similar to Ruby, and it shares many similarities with Ruby especially in its syntax for handling OOP</span>
</code></pre></div>

<h2>Printing</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- PRINTING ----------</span>
<span class="w">    </span><span class="c1"># puts appends a newline character to the end of the value printed</span>
<span class="w">    </span><span class="c1"># print does not append a newline character to the end of the value printed</span>

<span class="nb">puts</span><span class="w"> </span><span class="s2">&quot;this will print something with a newline&quot;</span>
<span class="nb">print</span><span class="w"> </span><span class="s2">&quot;this will also print something with a newline, but because we specified it</span><span class="se">\n</span><span class="s2">&quot;</span>
</code></pre></div>

<h2>Types</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- TYPE ----------</span>
<span class="w">    </span><span class="c1"># Integers (Signed/Unsigned)</span>
<span class="w">        </span><span class="c1"># Int8</span>
<span class="w">        </span><span class="c1"># Int16</span>
<span class="w">        </span><span class="c1"># Int32</span>
<span class="w">        </span><span class="c1"># Int64</span>
<span class="w">        </span><span class="c1"># Int129</span>
<span class="w">        </span><span class="c1"># UInt8</span>
<span class="w">        </span><span class="c1"># UInt16</span>
<span class="w">        </span><span class="c1"># UInt32</span>
<span class="w">        </span><span class="c1"># UInt64</span>
<span class="w">        </span><span class="c1"># UInt128</span>
<span class="w">    </span><span class="c1"># Floats</span>
<span class="w">        </span><span class="c1"># Float32</span>
<span class="w">        </span><span class="c1"># Float64</span>
<span class="w">    </span><span class="c1"># Char (&#39;&#39; single quotation marks)</span>
<span class="w">    </span><span class="c1"># String (&quot;&quot; double quotation marks, immutable)</span>
<span class="w">    </span><span class="c1"># Bool (true/false)</span>
<span class="w">    </span><span class="c1"># Symbol (immutable, reusable constants represented internally as Int32 to convey meaningful values, similar to Ruby)</span>

<span class="mi">1_i8</span><span class="w"> </span><span class="c1"># Int8</span>
<span class="mi">1_i16</span><span class="w"> </span><span class="c1"># Int16</span>
<span class="mi">1_i32</span><span class="w"> </span><span class="c1"># Int32</span>
<span class="mi">1_i64</span><span class="w"> </span><span class="c1"># Int64</span>
<span class="mi">1_i128</span><span class="w"> </span><span class="c1"># Int128</span>
<span class="mi">1_u8</span><span class="w"> </span><span class="c1"># UInt8</span>
<span class="mi">1_u16</span><span class="w"> </span><span class="c1"># UInt16</span>
<span class="mi">1_u32</span><span class="w"> </span><span class="c1"># UInt32</span>
<span class="mi">1_u64</span><span class="w"> </span><span class="c1"># UInt64</span>
<span class="mi">1_u128</span><span class="w"> </span><span class="c1"># UInt128</span>
<span class="mf">1.0_f32</span><span class="w"> </span><span class="c1"># Float32</span>
<span class="mf">1.0_f64</span><span class="w"> </span><span class="c1"># Float64</span>

<span class="sc">&#39;a&#39;</span><span class="w"> </span><span class="c1"># Char</span>
<span class="s2">&quot;hello world&quot;</span><span class="w"> </span><span class="c1"># String</span>

<span class="kc">true</span><span class="w"> </span><span class="c1"># Bool</span>

<span class="ss">:question?</span><span class="w"> </span><span class="c1"># Symbol</span>
</code></pre></div>

<h2>Operators</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- ARITHMETIC OPERATOR ----------</span>

<span class="o">+</span><span class="w"> </span><span class="c1"># addition</span>
<span class="o">-</span><span class="w"> </span><span class="c1"># subtraction</span>
<span class="o">*</span><span class="w"> </span><span class="c1"># multiplication</span>
<span class="sr">/ # divison</span>
<span class="sr">% # modulo</span>
<span class="sr">** # exponentiation</span>

<span class="sr"># ---------- COMPARISON OPERATOR ----------</span>

<span class="sr">== # complete equality, including type</span>
<span class="sr">!= # complete inequality, including type</span>
<span class="sr">&lt; # comparison operator</span>
<span class="sr">&gt; # comparison operator</span>
<span class="sr">&lt;= # comparison operator</span>
<span class="sr">&gt;= # comparison operator</span>

<span class="sr"># ---------- LOGICAL OPERATOR ----------</span>

<span class="sr">&amp;&amp; # and</span>
<span class="sr">|| # or</span>
<span class="sr">! # not</span>
</code></pre></div>

<h2>Data structures</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- DATA STRUCTURE ----------</span>

<span class="c1"># ---------- ARRAY ----------</span>
<span class="w">    </span><span class="c1"># initialized with [] square brackets</span>
<span class="w">    </span><span class="c1"># lists of dynamic size that can store values of different types</span>
<span class="w">    </span><span class="c1"># empty arrays should specify their data type</span>

<span class="n">anArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="o">]</span>
<span class="n">anotherArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;x&#39;</span><span class="o">]</span>
<span class="n">anIntArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Array</span><span class="p">(</span><span class="n">Int32</span><span class="p">)</span><span class="o">.</span><span class="n">new</span>

<span class="c1"># ARRAY METHODS</span>

<span class="n">anArray</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="c1"># returns 2, all data structures are zero-indexed</span>
<span class="n">anArray</span><span class="o">[-</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="c1"># returns 6, negative indexing returns values from the back similar to Python</span>
<span class="n">anArray</span><span class="o">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="w"> </span><span class="c1"># returns [3,4,5], a start index and size returns a subarray starting from the specified index and counts to the specified size</span>
<span class="n">anArray</span><span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="o">]</span><span class="w"> </span><span class="c1"># returns [2,3,4], a range returns a subarray comprising elements from the parent array of the specified indexes within the range</span>
<span class="n">anArray</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="c1"># returns [1,2,3,4,5,6,7], appends a value to the array</span>
<span class="n">anArray</span><span class="o">.</span><span class="n">pop</span><span class="w"> </span><span class="c1"># returns 7, pop operates the same as in Python and removes and returns the last element of the array</span>
<span class="n">anArray</span><span class="o">.</span><span class="n">shift</span><span class="w"> </span><span class="c1"># returns 1, shift operates the same as in Python and removes and returns the first element of the array</span>
<span class="n">anArray</span><span class="o">.</span><span class="n">includes?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1"># returns true, .includes? checks for the existence of a value within an array and returns a boolean value</span>

<span class="c1"># ---------- HASH ----------</span>
<span class="w">    </span><span class="c1"># equivalent to an associative array in PHP, a dictionary in Python or an object in Javascript</span>
<span class="w">    </span><span class="c1"># stores key-value pairs of any type, the key-value pairs can be of different types even within the same hash</span>

<span class="n">aHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;color&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;number&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;watermelon&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>

<span class="c1"># HASH METHODS</span>

<span class="n">aHash</span><span class="o">[</span><span class="s2">&quot;color&quot;</span><span class="o">]</span><span class="w"> </span><span class="c1"># returns &quot;green&quot;, lookup values by key</span>
<span class="n">aHash</span><span class="o">.</span><span class="n">has_key?</span><span class="w"> </span><span class="s2">&quot;color&quot;</span><span class="w"> </span><span class="c1"># returns true, .has_key? checks for the existence of a given key in a hash and returns a boolean value</span>

<span class="c1"># ---------- RANGE ----------</span>
<span class="w">    </span><span class="c1"># creation of ranges is easy in Crystal similar to Rust</span>
<span class="w">    </span><span class="c1"># .. creates an inclusive array</span>
<span class="w">    </span><span class="c1"># ... creates an exclusive array (at the end)</span>

<span class="n">aRange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="w"> </span><span class="c1"># evaluates to [1,2,3,4,5,6,7,8,9,10], creation of an inclusive range</span>
<span class="n">anotherRange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">...</span><span class="mi">10</span><span class="w"> </span><span class="c1"># evaluates to [1,2,3,4,5,6,7,8,9], creation of an exclusive range</span>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">includes?</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1"># returns true, .includes? can be similarly called on ranges</span>

<span class="c1"># ---------- TUPLE ----------</span>
<span class="w">    </span><span class="c1"># fixed-size immutable stack-allocated sequence of values which can be of different types</span>

<span class="n">aTuple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;x&#39;</span><span class="p">}</span>

<span class="c1"># TUPLE METHODS</span>

<span class="n">aTuple</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="c1"># returns &quot;hello&quot;, access tuple values by their indexes</span>
</code></pre></div>

<h2>Control structures</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- CONDITIONAL CHECK -----------</span>

<span class="c1"># IF ELSIF ELSE END</span>
<span class="w">    </span><span class="c1"># note the elsif</span>

<span class="k">if</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="s2">&quot;if statement&quot;</span>
<span class="k">elsif</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="s2">&quot;else-if statement&quot;</span>
<span class="k">else</span>
<span class="w">  </span><span class="s2">&quot;else statement, don&#39;t forget the end!&quot;</span>
<span class="k">end</span>

<span class="c1"># CASE WHEN END</span>
<span class="w">    </span><span class="c1"># the equivalent of the switch case in other languages</span>
<span class="w">    </span><span class="c1"># allows for a degree of pattern-matching</span>

<span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;move&quot;</span>
<span class="k">case</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span>
<span class="w">    </span><span class="k">when</span><span class="w"> </span><span class="s2">&quot;create&quot;</span>
<span class="w">        </span><span class="s2">&quot;Creating&quot;</span>
<span class="w">    </span><span class="k">when</span><span class="w"> </span><span class="s2">&quot;copy&quot;</span>
<span class="w">        </span><span class="s2">&quot;Copying&quot;</span>
<span class="w">    </span><span class="k">when</span><span class="w"> </span><span class="s2">&quot;move&quot;</span>
<span class="w">        </span><span class="s2">&quot;Moving&quot;</span>
<span class="k">end</span>

<span class="c1"># TERNARY OPERATOR (for the 1% who uses them)</span>
<span class="w">    </span><span class="c1"># syntax is (CONDITIONAL CHECK) ? (RUNS IF TRUE) : (RUNS IF FALSE)</span>

<span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="c1"># a evaluates to 4 </span>

<span class="c1"># ---------- LOOP ----------</span>

<span class="c1"># WHILE LOOP</span>
<span class="w">    </span><span class="c1"># works as you&#39;d expect</span>

<span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="k">while</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">3</span>
<span class="w">  </span><span class="nb">puts</span><span class="w"> </span><span class="n">index</span>
<span class="w">  </span><span class="n">index</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span>
<span class="k">end</span>

<span class="c1"># UNTIL LOOP</span>
<span class="w">    </span><span class="c1"># basically the reverse of a while condition</span>

<span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="k">until</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span>
<span class="w">  </span><span class="nb">puts</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="c1"># this prints out the exact same thing as the above while loop</span>
<span class="w">  </span><span class="n">index</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span>
<span class="k">end</span>

<span class="c1"># EACH DO END LOOP</span>
<span class="w">    </span><span class="c1"># similar to Ruby, the defacto prefereable replacement to for, while and until loops</span>
<span class="w">    </span><span class="c1"># notice it utilises a range to iterate over with the .each, which creates an iterable from a collection of elements</span>

<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">each</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="o">|</span><span class="n">index</span><span class="o">|</span>
<span class="w">  </span><span class="nb">puts</span><span class="w"> </span><span class="n">index</span>
<span class="k">end</span>
</code></pre></div>

<h2>Functions</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- FUNCTION ----------</span>
<span class="w">    </span><span class="c1"># def and end declare a function block, similar to Python and Lua</span>
<span class="w">    </span><span class="c1"># functions have implicit return (the value of the last statement of a function is implicitly returned)</span>
<span class="w">    </span><span class="c1"># functions can be called without () brackets when the call is unambiguous</span>
<span class="w">    </span><span class="c1"># multiple method arguments are separated by commas</span>

<span class="k">def</span><span class="w"> </span><span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1"># this value is implicitly returned</span>
<span class="k">end</span>
<span class="n">double</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1"># returns 6</span>
<span class="n">double</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1"># returns 12</span>

<span class="k">def</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="c1"># note the implicit return</span>
<span class="k">end</span>
<span class="n">sum</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="w"> </span><span class="c1"># returns 7</span>
<span class="n">sum</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="mi">5</span><span class="w"> </span><span class="c1"># returns 12</span>
</code></pre></div>

<h2>More on</h2>
<ul>
<li><a href="Ruby.md">OOP</a> in Crystal (classes and objects)</li>
<li>symbols</li>
<li>proc</li>
<li>yield</li>
<li><a href="https://crystal-lang.org/">crystal documentation</a></li>
<li><a href="https://learnxinyminutes.com/docs/crystal/">learn crystal in y minutes</a></li>
</ul>
      </section>

    </article>

    <footer>
      <p>© 2023-<span id="current-year"></span> Gabriel Ong. All rights reserved.</p>
    </footer>
  </main>

  <div class="wrapper"></div>
</body>
</html>
