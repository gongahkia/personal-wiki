<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="Wiki Note: Redis - Gabriel Ong">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../style.css">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntl-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntlMono-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  <style>
    .thin-space:after{content:"\2006"}
    pre {
      overflow-x: auto;
      max-width: 100%;
    }
  </style>
  <script src="../script.js" defer></script>
  <title>GABRIEL ONG</title>
  <link rel="shortcut icon" href="../asset/blob.ico" type="image/x-icon">
</head>
<body>
  <div id="click-container"></div>
  <input type="button" id="dark-mode">
  <label for="dark-mode">
    <img id="infinityButton" src="../asset/roller.png" height="24" width="24"/>
  </label>

  <main>
    <article class="overallArticleTags">

      <section class="note-header">
        <h2>Redis</h2>

        <dl>
          <dt>File size</dt>
          <dd>11.4KB</dd>

          <dt>Lines of code</dt>
          <dd>131</dd>
        </dl>
      </section>

      <section class="note-content">
        <h1><code>Redis</code></h1>
<p>RAM in-memory data storage.</p>
<h2>Data types</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ----- DATA TYPES -----</span>
    <span class="c1"># String =&gt; foundational datatype composing the key-value pairs that redis is premised upon (used to store text, numbers etc), stored as sequences of BYTES</span>
    <span class="c1"># Hash =&gt; collection of key-value pairs</span>
    <span class="c1"># List =&gt; ordered collection of elements, supporting insertion and removal of elements</span>
    <span class="c1"># Set =&gt; unordered collection of unique elements, supporting membership checks and other useful set operations</span>
    <span class="c1"># Sorted Set =&gt; ordered collection of unique elements with each element posessing a unique score, supporting efficient range queries and other ordered operations</span>
    <span class="c1"># Stream =&gt; data structure for real-time data feeds, supporting insertion and removal of elements as well as range checks</span>
    <span class="c1"># HyperLogLog =&gt; data structures for approximating cardinality (number of unique elements) in large sets</span>
    <span class="c1"># Geospatial index =&gt; data stucture for effiicent storage and retrieval of geospatial data</span>
</code></pre></div>

<h2>Quickstart</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- QUICKSTART ----------</span>
    <span class="c1"># redis leverages on in-memory data storage (computer&#39;s RAM) that is not persistent across machine system reboots by design, but redis data can be made persistent using the following</span>
        <span class="c1"># rdb snapshots </span>
        <span class="c1"># append only files</span>
    <span class="c1"># redis is mainly used for caching, session management, leaderboards, messaging, rate limiting, counting, and dealing with both sorted and unsorted sets</span>
    <span class="c1"># redis can be interacted with similar commands in the CLI and using a GUI client called RedisInsight</span>
    <span class="c1"># however, redis is most often used via import as a library in Python</span>

<span class="kn">import</span> <span class="nn">redis</span>

<span class="c1"># ----- GENERAL -----</span>
    <span class="c1"># redis.Redis(host=&#39;&lt;hostname&gt;&#39;, port=&lt;portNumber&gt;) =&gt; connects to the specified redis server</span>
    <span class="c1"># .set(&lt;valueName&gt;, &lt;value&gt;) =&gt; assigns a value to the specified value name in memory</span>
    <span class="c1"># .get(&lt;valueName&gt;) =&gt; retrieves a value from memory based on the specified value name</span>
    <span class="c1"># .decode() =&gt; used to decode the bytes to a readable string</span>
    <span class="c1"># .hset(&lt;hashName&gt;, mapping=&lt;hashValue&gt;) =&gt; creates a new hash under the specified hash name, where the value is the hash</span>
    <span class="c1"># .hget(&lt;hashName&gt;, &lt;key&gt;) =&gt; retrieves a value from the specified hash using the given key</span>
    <span class="c1"># .rpsuh(&lt;listName&gt;, &lt;comma-delimited value(s) to be appended&gt;) =&gt; appends any number of comma-delimited values to the specified list</span>
    <span class="c1"># .lindex(&lt;index&gt;, &lt;listName&gt;) =&gt; retrives a value from the specified list based on the given index</span>
    <span class="c1"># .sadd(&lt;setName&gt;, *&lt;setValue&gt;) =&gt; adds/assigns elements to the specified set name</span>
    <span class="c1"># * =&gt; aestricks operator unpacks the List into multiple individual arguments as required by the .sadd() method</span>
    <span class="c1"># .sismember(&lt;setName&gt;, &lt;queriedMember&gt;) =&gt; returns a boolean value based on whether the queried element is a member of the specified set</span>
    <span class="c1"># .zadd(&lt;orderedSetName&gt;, &lt;orderedSetValue&gt;) =&gt; adds/assigns elements to the specified ordered set name</span>
    <span class="c1"># .zrangebyscore(&lt;orderedSetName&gt;, min=&lt;minimumValue&gt;, max=&lt;maximumValue&gt;) =&gt; retrieves elements within the specified score ranges from the specified ordered set</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">6379</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Alice&#39;</span><span class="p">)</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span> <span class="c1"># redis Strings are stored as sequences of bytes and have to be decoded</span>

<span class="n">user_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;city&#39;</span><span class="p">:</span> <span class="s1">&#39;New York&#39;</span><span class="p">}</span>
<span class="n">r</span><span class="o">.</span><span class="n">hset</span><span class="p">(</span><span class="s1">&#39;user:1&#39;</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="n">user_data</span><span class="p">)</span>
<span class="n">age</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">hget</span><span class="p">(</span><span class="s1">&#39;user:1&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">age</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

<span class="n">r</span><span class="o">.</span><span class="n">rpush</span><span class="p">(</span><span class="s1">&#39;shopping_list&#39;</span><span class="p">,</span> <span class="s1">&#39;apples&#39;</span><span class="p">,</span> <span class="s1">&#39;bread&#39;</span><span class="p">,</span> <span class="s1">&#39;milk&#39;</span><span class="p">)</span>
<span class="n">first_item</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">lindex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;shopping_list&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">first_item</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

<span class="n">fruits</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">}</span>
<span class="n">r</span><span class="o">.</span><span class="n">sadd</span><span class="p">(</span><span class="s1">&#39;fruits&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">fruits</span><span class="p">)</span>
<span class="n">is_member</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">sismember</span><span class="p">(</span><span class="s1">&#39;fruits&#39;</span><span class="p">,</span> <span class="s1">&#39;mango&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">is_member</span><span class="p">)</span>

<span class="n">leaderboard</span> <span class="o">=</span> <span class="p">{(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Charlie&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">)}</span>
<span class="n">r</span><span class="o">.</span><span class="n">zadd</span><span class="p">(</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="n">leaderboard</span><span class="p">)</span>
<span class="n">top_3</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">zrangebyscore</span><span class="p">(</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">85</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">top_3</span><span class="p">)</span>
</code></pre></div>

<h2>More on</h2>
<ul>
<li><a href="https://redis.io/docs/latest/">redis documentation</a></li>
<li><a href="https://redis.io/docs/latest/develop/connect/cli/">redis cli</a></li>
<li><a href="https://redis.io/insight/">redisinsight</a></li>
<li><a href="https://redis.io/redis-enterprise/technology/durable-redis/">persisting data in redis</a></li>
<li><a href="https://www.openmymind.net/2011/11/8/Redis-Zero-To-Master-In-30-Minutes-Part-1/">zero to master in redis part 1</a></li>
<li><a href="https://www.openmymind.net/2011/11/8/Redis-Zero-To-Master-In-30-Minutes-Part-2/">zero to master in redis part 2</a></li>
<li><a href="https://medium.com/@aman.parmar17/getting-started-with-redis-73f016315317">getting started with redis</a></li>
</ul>
      </section>

    </article>

    <footer>
      <p>© 2023-<span id="current-year"></span> Gabriel Ong. All rights reserved.</p>
    </footer>
  </main>

  <div class="wrapper"></div>
</body>
</html>
