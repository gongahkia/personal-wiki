<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="Wiki Note: Awk - Gabriel Ong">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../style.css">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntl-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="https://res.hajimehoshi.com/fonts/SuisseIntlMono-Regular-WebXL.woff2" as="font" crossorigin="anonymous">
  <style>
    .thin-space:after{content:"\2006"}
    pre {
      overflow-x: auto;
      max-width: 100%;
    }
  </style>
  <script src="../script.js" defer></script>
  <title>GABRIEL ONG</title>
  <link rel="shortcut icon" href="../asset/blob.ico" type="image/x-icon">
</head>
<body>
  <div id="click-container"></div>
  <input type="button" id="dark-mode">
  <label for="dark-mode">
    <img id="infinityButton" src="../asset/roller.png" height="24" width="24"/>
  </label>

  <main>
    <article class="overallArticleTags">

      <section class="note-header">
        <h2>Awk</h2>

        <dl>
          <dt>File size</dt>
          <dd>15.1KB</dd>

          <dt>Lines of code</dt>
          <dd>239</dd>
        </dl>
      </section>

      <section class="note-content">
        <h1><code>Awk</code></h1>
<p>Standard UNIX tool for text-processing that's more readable than Perl.</p>
<h2>Comments</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- COMMENT ----------</span>

<span class="c1"># this is a single-line comment</span>

<span class="c1"># there is no built-in</span>
<span class="c1"># syntax for multi-line</span>
<span class="c1"># comments</span>
</code></pre></div>

<h2>Printing</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- PRINT ----------</span>
    <span class="c1"># print =&gt; prints a string to the stdout and appends a newline to the output</span>
    <span class="c1"># printf =&gt; prints a string to the stdout and does not include a newline, allows for format specifiers for further string interpolation</span>
        <span class="c1"># %s =&gt; string</span>
        <span class="c1"># %c =&gt; char</span>
        <span class="c1"># %d =&gt; integer number</span>
        <span class="c1"># %f =&gt; floating-point number</span>
        <span class="c1"># %x =&gt; hexadecimal number </span>
        <span class="c1"># %o =&gt; octal number</span>
        <span class="c1"># %% =&gt; literal percent sign</span>

<span class="kr">printf</span> <span class="s2">&quot;this does not include a newline and we must explicitly specify its inclusion\n&quot;</span><span class="p">;</span>
<span class="nx">a_number</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kr">printf</span> <span class="s2">&quot;this too %d needs a newline explicitly specified\n&quot;</span><span class="p">,</span> <span class="nx">a_number</span><span class="p">;</span>
<span class="kr">print</span> <span class="s2">&quot;this includes a newline automatically&quot;</span><span class="p">;</span>
</code></pre></div>

<h2>Quickstart</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- QUICKSTART ----------</span>
    <span class="c1"># ; semicolons aren&#39;t required but encouraged for awk&#39;s one-liners</span>
    <span class="c1"># awk programs consist of a collection of patterns and actions that are iterated over for each white-space delimited file supplied</span>
    <span class="c1"># #!/usr/bin/awk -f =&gt; conventionally placed at the start of every awk script file, to specify awk is to be used to interpret this program</span>
    <span class="c1"># BEGIN =&gt; runs at the beginning of the program and typically used to setup any preliminary code before files are read, pattern that is true before any of the specified files are read</span>
    <span class="c1"># END =&gt; runs at the end of the program after all text files are processed, pattern that is true after an end-of-file from the last specified file is provided</span>
    <span class="c1"># variables are global by default</span>

<span class="c1">#!/usr/bin/awk -f</span>

<span class="nx">pattern1</span> <span class="p">{</span> <span class="nx">action</span><span class="p">;</span> <span class="p">}</span>
<span class="nx">pattern2</span> <span class="p">{</span> <span class="nx">action</span><span class="p">;</span> <span class="p">}</span>

<span class="nb">BEGIN</span> <span class="p">{</span>
    <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1"># this is a global variable by default</span>
<span class="p">}</span>

<span class="nb">END</span> <span class="p">{</span>
    <span class="kr">print</span> <span class="s2">&quot;all done&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h2>Types</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- TYPE ----------</span>
    <span class="c1"># Integer</span>
    <span class="c1"># Float</span>
    <span class="c1"># Char =&gt; &#39;&#39; single quotation marks</span>
    <span class="c1"># String =&gt; &quot;&quot; double quotation marks</span>
    <span class="c1"># Boolean =&gt; 0 is false, any non-0 value is true</span>
</code></pre></div>

<h2>Operators</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- OPERATOR ----------</span>

<span class="c1"># ARITHMETIC OPERATORS</span>
    <span class="c1"># + =&gt; addition</span>
    <span class="c1"># - =&gt; subtraction</span>
    <span class="c1"># * =&gt; multiplication</span>
    <span class="c1"># / =&gt; division</span>
    <span class="c1"># % =&gt; modulo operator</span>
    <span class="c1"># ^ =&gt; exponentiation operator</span>
    <span class="c1"># ++ =&gt; increment by one</span>
    <span class="c1"># -- =&gt; decrement by one</span>
    <span class="c1"># += =&gt; addition and reassignment</span>
    <span class="c1"># -= =&gt; subtraction and reassignment</span>
    <span class="c1"># *= =&gt; multiplication and reassignment</span>
    <span class="c1"># /= =&gt; division and reassignment</span>
    <span class="c1"># %= =&gt; modulus reassignment</span>
    <span class="c1"># ^= =&gt; exponentiation and reassignment</span>

<span class="c1"># LOGICAL OPERATORS</span>
    <span class="c1"># &amp;&amp; =&gt; logical and</span>
    <span class="c1"># || =&gt; logical or</span>
    <span class="c1"># ! =&gt; logical not</span>

<span class="c1"># COMPARISON OPERATORS</span>
    <span class="c1"># == =&gt; partial equality check for value</span>
    <span class="c1"># != =&gt; partial inequality check for value</span>
    <span class="c1"># ~ =&gt; equality check for a match using regular expressions</span>
    <span class="c1"># !~ =&gt; inequality check for a match using regular expressions </span>
    <span class="c1"># &lt; &gt; &lt;= &gt;= are also comparison operators</span>
</code></pre></div>

<h2>Control structures</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- CONTROL STRUCTURE ----------</span>

<span class="c1"># CONDITIONALS</span>

<span class="c1"># IF ELSE IF ELSE</span>

<span class="k">if</span> <span class="p">(</span><span class="o">$</span><span class="mi">1</span> <span class="o">==</span> <span class="s2">&quot;apple&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">print</span> <span class="s2">&quot;It&#39;s an apple!&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">$</span><span class="mi">1</span> <span class="o">==</span> <span class="s2">&quot;banana&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">print</span> <span class="s2">&quot;It&#39;s a banana!&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">$</span><span class="mi">1</span> <span class="o">==</span> <span class="s2">&quot;orange&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">print</span> <span class="s2">&quot;It&#39;s an orange!&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kr">print</span> <span class="s2">&quot;It&#39;s something else.&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1"># TERNARY OPERATOR</span>
    <span class="c1"># ternary syntax is =&gt; {PREDICATE} ? {TRUE FORM} : {FALSE FORM}</span>

<span class="nx">result</span> <span class="o">=</span> <span class="p">(</span><span class="o">$</span><span class="mi">1</span> <span class="o">==</span> <span class="s2">&quot;apple&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;It&#39;s an apple!&quot;</span> <span class="o">:</span> <span class="s2">&quot;It&#39;s not an apple.&quot;</span>

<span class="c1"># LOOPS</span>

<span class="c1"># WHILE LOOPS</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">print</span> <span class="s2">&quot;string concatenation is done&quot;</span> <span class="s2">&quot; with a series&quot;</span> <span class="s2">&quot; of&quot;</span> <span class="s2">&quot; space-delimited strings&quot;</span><span class="p">;</span>
    <span class="kr">print</span> <span class="nx">a</span><span class="p">;</span>
    <span class="nx">a</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1"># FOR LOOPS</span>
    <span class="c1"># for =&gt; allows for a rudimentary for loop implementation</span>
    <span class="c1"># for in =&gt; allows for iteration of an element across an iterable data structure like an associative array</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="kr">print</span> <span class="s2">&quot;we gonna keep looping until we hit 9&quot;</span><span class="p">;</span>

<span class="nx">an_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;watermelon&quot;</span><span class="p">;</span>
<span class="nx">an_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;sugar&quot;</span><span class="p">;</span>
<span class="nx">an_arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="o">in</span> <span class="nx">an_arr</span><span class="p">)</span>
    <span class="kr">print</span> <span class="nx">an_arr</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
</code></pre></div>

<h2>Data structures</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- DATA STRUCTURE ----------</span>

<span class="c1"># ASSOCIATIVE ARRAYS</span>
    <span class="c1"># combination of an array and a hash comprised of key-value pairs, similar to tables in Lua or associative arrays in PHP</span>
    <span class="c1"># split =&gt; splits a string by a specified delimiter and returns an associative array </span>
    <span class="c1"># in =&gt; checks for an element&#39;s membership in a specified associative array</span>

<span class="nx">string_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;foo&quot;</span><span class="p">;</span>
<span class="nx">string_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span><span class="p">;</span> <span class="c1"># creates an associative array called string_arr with two string values that have integer keys</span>

<span class="nx">string_assoc</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span><span class="p">;</span>
<span class="nx">string_assoc</span><span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;baz&quot;</span><span class="p">;</span> <span class="c1"># creates another associative array called string_assoc with two string values that have string keys</span>

<span class="nx">n</span> <span class="o">=</span> <span class="kr">split</span><span class="p">(</span><span class="s2">&quot;foo:bar:baz&quot;</span><span class="p">,</span> <span class="nx">arr</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">);</span> <span class="c1"># split() also initializes an array, similar to Python</span>

<span class="k">if</span> <span class="p">(</span><span class="s2">&quot;foo&quot;</span> <span class="o">in</span> <span class="nx">assoc</span><span class="p">)</span>
    <span class="kr">print</span> <span class="s2">&quot;Fooey!&quot;</span><span class="p">;</span> <span class="c1"># checks for array membership</span>
</code></pre></div>

<h2>Functions</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ---------- FUNCTION ----------</span>
    <span class="c1"># function =&gt; declares and creates a function</span>
    <span class="c1"># return =&gt; specifies the function return expression</span>
    <span class="c1"># only function parameters are local to the function, every other variable including those declared first within the function are global, so the workaround is to declare more function parameters than required and using those extra parameters as local variables</span>

<span class="kd">function</span> <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">print</span> <span class="s2">&quot;hello world&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h2>More on</h2>
<ul>
<li>file IO</li>
<li>pipes</li>
<li>ARGV</li>
<li>ARGC</li>
<li><a href="https://www.gnu.org/software/gawk/manual/gawk.html">awk documentation</a></li>
<li><a href="https://learnxinyminutes.com/docs/awk/">learn awk in y minutes</a></li>
<li><a href="http://tuxgraphics.org/~guido/scripts/awk-one-liner.html">awk one-liners</a></li>
<li><a href="https://github.com/dubiousjim/awkenough">awk libraries</a></li>
<li><a href="https://www.grymoire.com/Unix/Awk.html">awk made easy</a></li>
</ul>
      </section>

    </article>

    <footer>
      <p>© 2023-<span id="current-year"></span> Gabriel Ong. All rights reserved.</p>
    </footer>
  </main>

  <div class="wrapper"></div>
</body>
</html>
